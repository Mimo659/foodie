/* IMPORTS & GLOBALE VARIABLEN */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
:root {
    /* Original Palette (some might be overridden or kept for specific uses) */
    /* Original Palette (some might be overridden or kept for specific uses) */
    /* --primary-color: #2A9D8F; */ /* Original Teal - Deprecated */
    /* --primary-dark: #264653; */ /* Original Dark Blue/Teal - Deprecated for header, will be redefined if needed elsewhere */
    /* --accent-color: #E9C46A; */ /* Original Yellow - Deprecated */
    /* --accent-highlight: #F4A261; */ /* Original Orange - Deprecated */
    /* --danger-color: #E76F51; */ /* Original Coral Red - Deprecated, replaced by --k-accent-red */
    /* --background-color: #F7F9FA; */ /* Original Light Gray BG - Deprecated, replaced by --k-bg-light */
    /* --card-bg-color: #FFFFFF; */ /* Original White Card BG - Deprecated, replaced by --k-bg-card */
    /* --text-color: #264653; */ /* Original Dark Text - Deprecated, replaced by --k-text-primary */
    /* --subtle-text-color: #8D99AE; */ /* Original Gray Text - Deprecated, replaced by --k-text-secondary */
    /* --border-color: #E9ECEF; */ /* Original Light Border - Deprecated, replaced by --k-border-light */

    /* New Kitchen-Friendly Harmonious & Colorful Palette - REFINED */
    --k-bg-light: #FDFCFB; /* Slightly brighter Warm Cream BG */
    --k-bg-card: #FFFFFF; /* Card BG - keeping white */
    --k-bg-overlay: rgba(61, 44, 42, 0.65); /* Overlay for modal, using dark brown base */

    --k-text-primary: #3A2A27; /* Slightly adjusted Dark Brown for primary text */
    --k-text-secondary: #70605C; /* Slightly adjusted Softer Brown for secondary text */
    --k-text-on-primary: #FFFFFF; /* Text color for on --k-primary-1 backgrounds */
    --k-text-on-secondary: #FFFFFF; /* Text color for on --k-primary-2 backgrounds */

    --k-primary-1: #E67E22; /* Carrot Orange - Maintained */
    --k-primary-1-darker: #D35400; /* Darker Carrot Orange for hover/active */
    --k-primary-1-lighter: #FADEC9; /* Lighter Carrot Orange for subtle backgrounds/hovers */

    --k-primary-2: #2ECC71; /* Emerald Green - Maintained */
    --k-primary-2-darker: #27AE60; /* Darker Emerald Green for hover/active */
    --k-primary-2-lighter: #D5F5E3; /* Lighter Emerald Green for subtle backgrounds/hovers */

    --k-accent-red: #E74C3C; /* Tomato Red */
    --k-accent-red-darker: #C0392B; /* Darker Tomato Red */
    --k-accent-yellow: #F1C40F; /* Sunny Yellow */
    --k-accent-blue: #3498DB; /* Cornflower Blue */
    --k-accent-purple: #9B59B6; /* Plum Purple */
    --k-accent-teal: #1ABC9C; /* Teal */
    --k-accent-terracotta: #E2725B; /* Terracotta */

    --k-border-light: #EDEAE8; /* Softer, warm border */
    --k-border-medium: #D1C9C6; /* Medium warm border for inputs etc. */
    --k-border-dark: #B0A5A1;  /* Darker, warm border for fieldsets etc. - TO BE REPLACED/DEPRECATED by new gray borders */

    /* Shadows - REVISED for new palette */
    --shadow-soft: 0 3px 6px rgba(44, 62, 80, 0.1);
    --shadow-medium: 0 5px 10px rgba(44, 62, 80, 0.15);
    --shadow-strong: 0 8px 15px rgba(44, 62, 80, 0.2);

    /* Helper lighter shades - standardized naming */
    /* --k-primary-1-light: #FADFC5; */ /* DEPRECATED - Replaced by --k-primary-1-lighter */
    /* --k-primary-2-light: #C8F7DC; */ /* DEPRECATED - Replaced by --k-primary-2-lighter */

    /* NEW VIBRANT PALETTE */
    --k-bg-light: #FFFFFF; /* Pure White */
    --k-bg-card: #FFFFFF; /* Pure White */
    --k-bg-overlay: rgba(0, 0, 0, 0.5); /* Neutral dark overlay */

    --k-text-primary: #2C3E50; /* Midnight Blue */
    --k-text-secondary: #566573; /* Steel Gray */
    --k-text-on-bright: #FFFFFF; /* White text for dark/saturated color backgrounds */
    --k-text-on-light-accent: #2c3e50; /* Dark text for lighter accent backgrounds */

    --k-primary-pop-1: #FF6B6B; /* Coral Pink */
    --k-primary-pop-1-darker: #E74C3C; /* Tomato Red */
    --k-primary-pop-1-lighter: #FFC1C1; /* Light Coral Pink */

    --k-primary-pop-2: #4ECDC4; /* Turquoise/Aqua */
    --k-primary-pop-2-darker: #1ABC9C; /* Teal */
    --k-primary-pop-2-lighter: #A0E7E5; /* Light Turquoise */

    --k-accent-vibrant-yellow: #FFD166; /* Sunny Yellow */
    --k-accent-vibrant-orange: #FFA07A; /* Light Salmon */
    --k-accent-vibrant-green: #90EE90; /* Light Green */
    --k-accent-vibrant-purple: #C39BD3; /* Pastel Purple */
    --k-accent-vibrant-blue: #5DADE2; /* Sky Blue */

    --k-border-light: #EAECEE; /* Light Gray for subtle separation on white */
    --k-border-medium: #D5D8DC; /* Medium Gray */
    /* --k-border-dark: #B0A5A1; */ /* DEPRECATED - old warm border */
    /* --k-border-vibrant-accent: To be defined by use case */

    /* Header specific - Option 2 (Dark Contrast) chosen - NOW CHANGED TO LIGHT HEADER */
    --header-bg: #FFFFFF; /* White */
    --header-text: var(--k-text-primary); /* Midnight Blue - same as primary text */

    /* Dark Mode Palette - NEW */
    --dark-bg-light: #1A1A1A; /* Very dark gray, almost black */
    --dark-bg-card: #2C2C2C; /* Dark gray for cards */
    --dark-bg-overlay: rgba(0, 0, 0, 0.7); /* Darker overlay */

    --dark-text-primary: #E0E0E0; /* Light gray for primary text */
    --dark-text-secondary: #B0B0B0; /* Medium gray for secondary text */
    --dark-text-on-bright: #121212; /* Dark text for on dark-mode pop color backgrounds if needed */
    --dark-text-on-light-accent: #E0E0E0; /* Light text for lighter accent backgrounds in dark mode */

    /* Dark mode pop colors can be the same or slightly desaturated/adjusted if needed */
    --dark-primary-pop-1: var(--k-primary-pop-1);
    --dark-primary-pop-1-darker: var(--k-primary-pop-1-darker);
    --dark-primary-pop-1-lighter: #4A2A2A; /* Darker base for lighter shade in dark mode */

    --dark-primary-pop-2: var(--k-primary-pop-2);
    --dark-primary-pop-2-darker: var(--k-primary-pop-2-darker);
    --dark-primary-pop-2-lighter: #2A4A4A; /* Darker base for lighter shade in dark mode */

    --dark-accent-red: var(--k-accent-red);
    --dark-accent-red-darker: var(--k-accent-red-darker);

    --dark-border-light: #404040; /* Darker light border */
    --dark-border-medium: #555555; /* Darker medium border */

    --dark-header-bg: #232323; /* Slightly different dark for header */
    --dark-header-text: var(--dark-text-primary);


    /* Deprecating old palette names for clarity if they were missed */
    --k-primary-1: var(--k-primary-pop-1); /* Alias old name to new for smoother transition if some styles missed */
    --k-primary-1-darker: var(--k-primary-pop-1-darker);
    --k-primary-1-lighter: var(--k-primary-pop-1-lighter);
    --k-primary-2: var(--k-primary-pop-2);
    --k-primary-2-darker: var(--k-primary-pop-2-darker);
    --k-primary-2-lighter: var(--k-primary-pop-2-lighter);
    --k-accent-red: #E74C3C; /* Keep for specific danger/error, distinct from pop-1 */
    --k-accent-red-darker: #C0392B;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

/* BASE STYLES */
body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    background-color: var(--k-bg-light);
    color: var(--k-text-primary);
    line-height: 1.6;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.3s ease, color 0.3s ease;
}
body.dark-mode {
    --k-bg-light: var(--dark-bg-light);
    --k-bg-card: var(--dark-bg-card);
    --k-bg-overlay: var(--dark-bg-overlay);
    --k-text-primary: var(--dark-text-primary);
    --k-text-secondary: var(--dark-text-secondary);
    --k-text-on-bright: var(--dark-text-on-bright); /* Might need adjustment based on pop color usage */
    --k-text-on-light-accent: var(--dark-text-on-light-accent);

    --k-primary-pop-1-lighter: var(--dark-primary-pop-1-lighter);
    --k-primary-pop-2-lighter: var(--dark-primary-pop-2-lighter);

    --k-border-light: var(--dark-border-light);
    --k-border-medium: var(--dark-border-medium);

    --header-bg: var(--dark-header-bg);
    --header-text: var(--dark-header-text);
    /* Pop colors and their darker variants remain the same unless explicitly changed for dark mode */
}

.container { max-width: 1200px; margin: 0 auto; padding: 1rem 1.5rem; } /* Reduced padding */

h1, h2, h3, h4, h5, h6 {
    color: var(--k-text-primary);
    font-weight: 700;
    margin-top: 0;
    margin-bottom: 0.75rem; /* Reduced bottom margin for headings */
}
h1 { font-size: 2.5rem; line-height: 1.15; letter-spacing: -0.5px;} /* Slightly smaller h1 */
h2 { font-size: 2rem; line-height: 1.2; } /* Smaller h2 */
h3 { font-size: 1.5rem; line-height: 1.25; } /* Smaller h3 */
h4 { font-size: 1.15rem; line-height: 1.35; font-weight: 600; } /* Smaller h4 */
p { margin-top: 0; margin-bottom: 0.75rem; color: var(--k-text-secondary); } /* Reduced bottom margin for paragraphs */
a { color: var(--k-primary-pop-1); text-decoration: none; font-weight: 500; transition: color 0.2s ease-in-out; }
a:hover { color: var(--k-primary-pop-1-darker); }

/* Icon base size and margin */
i.fa-solid, i.fas, i.ti {
    display: inline-block;
    width: 20px; /* Slightly smaller icon width */
    min-height: 1em; /* Ensure minimum height */
    line-height: 1; /* Ensure line height doesn't collapse it */
    text-align: center;
    vertical-align: middle;
    margin-right: 0.5rem; /* Reduced icon margin */
}
/* Specific icon colors can be set per component or use case */
.icon-primary { color: var(--k-primary-pop-1); }
.icon-secondary { color: var(--k-primary-pop-2); }
.icon-accent { color: var(--k-accent-vibrant-yellow); }


/* HEADER & NAVIGATION */
header {
    background: var(--header-bg);
    color: var(--header-text);
    padding: 0.25rem 0; /* Further reduced vertical padding for header bar */
    box-shadow: var(--shadow-medium);
    position: sticky;
    top: 0;
    z-index: 1000;
}
header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    /* padding-top: 0.5rem; */ /* Container padding is now handled by general .container rule */
    /* padding-bottom: 0.5rem; */
}

#logo {
    font-weight: 700;
    font-size: 1.75rem; /* Slightly smaller logo text */
    color: var(--header-text);
    display: flex;
    align-items: center;
    margin-right: 1.5rem; /* Reduced margin */
}
#logo .header-logo {
    height: 28px; /* Slightly smaller logo image */
    width: auto;
    margin-right: 0.5rem; /* Reduced space to text */
    border-radius: 4px;
}

/* Styles for the new navigation inside the header */
#main-header-nav {
    display: flex;
    gap: 0.3rem; /* Further reduced gap */
    align-items: center;
}

.nav-item {
    display: flex;
    align-items: center;
    padding: 0.5rem 0.8rem; /* Reduced padding for nav items */
    text-decoration: none;
    color: var(--k-text-secondary);
    font-weight: 500;
    font-size: 0.9rem; /* Slightly smaller font */
    border-radius: 6px; /* Smaller radius */
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    border: 1px solid transparent;
}
.nav-item i.ti {
    color: var(--k-text-secondary);
    transition: color 0.2s ease-in-out;
    font-size: 1em; /* Adjusted icon size */
    margin-right: 0.4rem; /* Reduced space */
}
.nav-item:hover {
    background-color: var(--k-primary-pop-1-lighter);
    color: var(--k-primary-pop-1-darker);
    border-color: var(--k-primary-pop-1-lighter);
    /* transform: none; */ /* No horizontal transform needed for header nav */
}
.nav-item:hover i.ti {
    color: var(--k-primary-pop-1);
}
.nav-item.active {
    background-color: var(--k-primary-pop-1);
    color: var(--k-text-on-bright);
    font-weight: 600;
    box-shadow: var(--shadow-soft); /* Softer shadow for active item in header */
    border-color: var(--k-primary-pop-1);
}
.nav-item.active i.ti {
    color: var(--k-text-on-bright);
}

/* Theme Toggle Button */
.theme-toggle-btn {
    background: none;
    border: 1px solid var(--k-border-medium);
    color: var(--k-text-secondary);
    padding: 0.4rem 0.6rem; /* Reduced padding */
    border-radius: 6px; /* Match nav items */
    cursor: pointer;
    display: flex;
    align-items: center;
    transition: background-color 0.2s, color 0.2s, border-color 0.2s;
}
.theme-toggle-btn:hover {
    background-color: var(--k-primary-pop-1-lighter);
    color: var(--k-primary-pop-1-darker);
    border-color: var(--k-primary-pop-1-lighter);
}
.theme-toggle-btn i.ti {
    font-size: 1.2em;
    margin-right: 0; /* No margin if it's just the icon */
}

body.dark-mode .theme-toggle-btn {
    border-color: var(--dark-border-medium);
    color: var(--dark-text-secondary);
}
body.dark-mode .theme-toggle-btn:hover {
    background-color: var(--dark-primary-pop-1-lighter); /* Using the dark mode var */
    color: var(--dark-primary-pop-1-darker); /* Assuming this is still readable */
    border-color: var(--dark-primary-pop-1-lighter);
}


/* Main layout adjustments */
.main-layout {
    display: flex;
    flex-direction: column;
    margin-top: 1rem; /* Reduced space below sticky header */
}
/* aside.main-nav is removed from here, styles are now for #main-header-nav */
main.main-content {
    flex: 1; /* Take remaining space */
    min-width: 0;
    width: 100%; /* Ensure it takes full width */
}


/* BANNER & SEKTIONEN */
.empty-state-banner {
    background: linear-gradient(135deg, var(--k-primary-pop-1-lighter), var(--k-primary-pop-2-lighter)),
                  url('https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=2070&auto=format&fit=crop') center center/cover;
    padding: 3rem 1.5rem; /* Reduced padding */
    border-radius: 16px; /* Reduced radius */
    text-align: center;
    box-shadow: var(--shadow-strong);
    color: var(--k-text-primary);
    margin-bottom: 2rem; /* Added margin bottom */
}
.banner-content {
    background-color: rgba(255, 255, 255, 0.92);
    display: inline-block;
    padding: 2rem 2.5rem; /* Reduced padding */
    border-radius: 12px; /* Reduced radius */
    backdrop-filter: blur(8px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.banner-content h2 { color: var(--k-primary-pop-1); font-size: 2rem; } /* Reduced font size */
.banner-content p { color: var(--k-text-secondary); font-size: 1rem; } /* Reduced font size */


/* Image specific CSS */
.recipe-card-image {
    width: 100%;
    height: 160px; /* Reduced height */
    object-fit: cover;
    border-radius: 8px 8px 0 0; /* Match card radius */
    margin-bottom: 0.75rem; /* Reduced margin */
}
.plan-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; } /* Reduced margin */
.plan-instructions {
    text-align: center;
    color: var(--k-text-primary);
    background-color: var(--k-primary-pop-2-lighter);
    padding: 1rem; /* Reduced padding */
    border-radius: 8px; /* Reduced radius */
    margin-bottom: 1.5rem; /* Reduced margin */
    border: 1px solid var(--k-primary-pop-2);
    font-weight: 500;
}
.plan-instructions i.ti { color: var(--k-primary-pop-2); }

.card { /* General card styling for generator, inventory etc. */
    background-color: var(--k-bg-card);
    padding: 1.5rem; /* Reduced padding */
    border-radius: 12px; /* Reduced radius */
    box-shadow: var(--shadow-medium);
    margin-bottom: 1.5rem; /* Reduced margin */
    border: 1px solid var(--k-border-light);
    /* Consider adding a subtle top border in a pop color */
    /* border-top: 4px solid var(--k-primary-pop-1-lighter); */
}
body.dark-mode .card {
    background-color: var(--dark-bg-card);
    border-color: var(--dark-border-light);
    /* box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2); */ /* Optional: different shadow for dark mode */
}
body.dark-mode #dashboard-view .card { background-color: transparent; border: none; } /* Keep dashboard card transparent */

#dashboard-view .card { box-shadow: none; border: none; padding: 0; }
.view.hidden { display: none; }


/* REZEPTKARTEN - VIBRANT STYLING (General, used in generator and potentially calendar) */
/* Styles for the original row-based dashboard layout */
.day-container {
    margin-bottom: 2rem; /* Reduced margin */
}
.day-container h3 { /* For "Montag", "Dienstag" etc. */
    font-size: 1.6rem; /* Reduced font size */
    font-weight: 700;
    padding-bottom: 0.5rem; /* Reduced padding */
    border-bottom: 2px solid var(--k-primary-pop-1); /* Thinner border */
    margin-bottom: 1.5rem; /* Reduced margin */
    color: var(--k-primary-pop-1);
}

.recipe-options { /* This is the container for the two recipe cards per day */
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); /* Slightly smaller minmax */
    gap: 1.5rem; /* Reduced gap */
}
/* End of original row-based dashboard layout styles */


/* Removed WEEKLY PLAN CALENDAR VIEW STYLES */
/* .weekly-plan-grid { ... } */
/* .calendar-day-cell { ... } */
/* .calendar-day-title { ... } */
/* .calendar-recipe-options { ... } */
/* .calendar-recipe-options .recipe-card { ... } */
/* .no-options-text { ... } */


.recipe-card { /* Individual recipe card - general styling */
    background: var(--k-bg-card);
    border: 2px solid var(--k-border-medium);
    padding: 1rem; /* Reduced padding */
    border-radius: 8px; /* Reduced radius */
    box-shadow: var(--shadow-soft);
    transition: all 0.25s ease-in-out;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    /* border-left: 4px solid var(--k-accent-vibrant-blue); */ /* Default vibrant accent - Replaced by full border */
    border-width: 2px;
    border-style: solid;
    /* border-color: var(--k-border-medium); */
    border-radius: 8px; /* Ensure rounded edges are clearly visible - matches above */
}
body.dark-mode .recipe-card {
    background: var(--dark-bg-card);
    /* Rainbow borders should still work. If not, define dark mode specific ones or adjust opacity of pop colors. */
    /* For now, assuming pop colors are visible enough on dark-bg-card */
}
/* Rainbow border effect for recipe cards */
.recipe-card:nth-of-type(6n+1) { border-color: var(--k-primary-pop-1); }
.recipe-card:nth-of-type(6n+2) { border-color: var(--k-accent-vibrant-orange); }
.recipe-card:nth-of-type(6n+3) { border-color: var(--k-accent-vibrant-yellow); }
.recipe-card:nth-of-type(6n+4) { border-color: var(--k-primary-pop-2); }
.recipe-card:nth-of-type(6n+5) { border-color: var(--k-accent-vibrant-blue); }
.recipe-card:nth-of-type(6n+6) { border-color: var(--k-accent-vibrant-purple); }


.recipe-card > *:last-child { margin-top: auto; }

.recipe-card.selected {
    /* border-color: var(--k-primary-pop-1); */ /* Selected border color will now be handled by its sequence or a specific override */
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.25); /* Stronger shadow when selected */
    /* Ensure the border of selected card is prominent, maybe thicker or a specific highlight color */
    border-width: 3px; /* Slightly thinner selected border */
}
.recipe-card:not(.selected) {
    opacity: 1;
}
.recipe-card:hover:not(.selected) {
    transform: translateY(-3px) scale(1.01); /* Slightly less pronounced hover */
    box-shadow: var(--shadow-medium);

}
.recipe-card h4 {
    font-size: 1.1rem; /* Reduced font size */
    font-weight: 700;
    color: var(--k-text-primary);
    margin-bottom: 0.4rem; /* Reduced margin */
}
.recipe-card p { font-size: 0.85rem; margin-bottom: 0.5rem; } /* Reduced font size and margin */

/* Nutrition Info Styling */
.recipe-nutrition-info {
    margin-top: 0.75rem; /* Reduced margin */
    padding-top: 0.5rem; /* Reduced padding */
    border-top: 1px solid var(--k-border-light);
}
body.dark-mode .recipe-nutrition-info {
    border-top-color: var(--dark-border-light);
}
.recipe-nutrition-info h5 {
    font-size: 0.9rem; /* Reduced font size */
    font-weight: 600;
    color: var(--k-text-primary);
    margin-bottom: 0.3rem; /* Reduced margin */
}
.recipe-nutrition-info ul {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.8rem; /* Reduced font size */
}
.recipe-nutrition-info li {
    margin-bottom: 0.15rem; /* Reduced margin */
    color: var(--k-text-secondary);
}
.recipe-nutrition-info li strong {
    color: var(--k-text-primary);
    font-weight: 500;
}


/* Colorful tags - VIBRANT */
.recipe-card .tags { margin-bottom: 0.75rem; } /* Reduced margin */
.recipe-card .tags span {
    display: inline-block;
    padding: .35em .8em; /* Reduced padding */
    font-size: .75rem; /* Reduced font size */
    font-weight: 600;
    border-radius: 8px; /* Less pill, more badge-like */
    margin: 0.3rem 0.2rem;
    color: var(--k-text-on-bright);
    line-height: 1.3;
    transition: transform 0.2s ease;
}
/* Dark mode tags: text color might need to change if pop colors are too light */
body.dark-mode .recipe-card .tags span {
    /* color: var(--dark-text-on-bright); */ /* Assuming pop colors are dark enough for light text */
}
body.dark-mode .recipe-card .tags span:not(.price-tag):nth-of-type(5n+1), /* Yellow */
body.dark-mode .recipe-card .tags span:not(.price-tag):nth-of-type(5n+3) { /* Green */
    color: var(--dark-text-primary); /* Darker text for lighter tags in dark mode */
}


.recipe-card .tags span:hover { transform: scale(1.05); }

.tags span i.ti { margin-right: 0.5rem; font-size: 0.8em; }

.recipe-card .tags span.price-tag {
    background-color: var(--k-primary-pop-2); /* Turquoise for price */
    color: var(--k-text-on-bright);
}
/* Cycle through vibrant accent colors for other tags */
.recipe-card .tags span:not(.price-tag):nth-of-type(5n+1) { background-color: var(--k-accent-vibrant-yellow); color: var(--k-text-on-light-accent); }
.recipe-card .tags span:not(.price-tag):nth-of-type(5n+2) { background-color: var(--k-accent-vibrant-orange); }
.recipe-card .tags span:not(.price-tag):nth-of-type(5n+3) { background-color: var(--k-accent-vibrant-green); color: var(--k-text-on-light-accent); }
.recipe-card .tags span:not(.price-tag):nth-of-type(5n+4) { background-color: var(--k-accent-vibrant-purple); }
.recipe-card .tags span:not(.price-tag):nth-of-type(5n+5) { background-color: var(--k-accent-vibrant-blue); }
.recipe-card .tags span:not(.price-tag):only-of-type { background-color: var(--k-primary-pop-1); } /* If only one tag, use primary pop */


.recipe-card .match-info {
    margin-top: 0.75rem; /* Reduced margin */
    padding-top: 0.75rem; /* Reduced padding */
    border-top: 1px solid var(--k-border-light);
}
body.dark-mode .recipe-card .match-info {
    border-top-color: var(--dark-border-light);
}
.match-info .match-bar {
    width: 100%;
    height: 12px; /* Thicker match bar */
    background-color: var(--k-border-medium); /* Darker base for bar */
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 0.6rem;
}
body.dark-mode .match-info .match-bar {
    background-color: var(--dark-border-medium);
}
.match-info .match-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--k-accent-vibrant-yellow), var(--k-primary-pop-1)); /* Vibrant gradient */
    border-radius: 6px;
    transition: width 0.5s ease-in-out;
}
.match-info .match-text { font-size: 0.9rem; font-weight: 600; color: var(--k-text-primary); }
.match-info .missing-ingredients { font-size: 0.85rem; color: var(--k-accent-red); margin-top: 0.4rem; }
body.dark-mode .match-info .missing-ingredients { color: var(--dark-accent-red); }
.match-info .all-ingredients-present { font-size: 0.85rem; color: var(--k-primary-pop-2-darker); font-weight: 600; margin-top: 0.4rem; }
body.dark-mode .match-info .all-ingredients-present { color: var(--dark-primary-pop-2-darker); } /* Assuming pop-2 darker is fine */
.missing-ingredients strong { font-weight: 700; }


/* BUTTONS - VIBRANT STYLING */
.btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9rem; /* Reduced base button font size */
    text-align: center;
    cursor: pointer;
    border: 2px solid transparent;
    padding: 0.6rem 1.25rem; /* Reduced padding */
    border-radius: 8px; /* Reduced radius */
    transition: all .2s ease-in-out;
    box-shadow: var(--shadow-medium);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.btn-primary:hover:not(:disabled),
.btn-secondary:hover:not(:disabled),
.btn-confirm:hover:not(:disabled),
.btn-danger:hover:not(:disabled),
.btn-info:hover:not(:disabled) {
    transform: translateY(-2px) scale(1.02); /* Slightly less hover pop */
    box-shadow: var(--shadow-strong);
}

.btn-primary {
    background-color: var(--k-primary-pop-1);
    color: var(--k-text-on-bright);
    border-color: var(--k-primary-pop-1);
}
.btn-primary:hover:not(:disabled) {
    background-color: var(--k-primary-pop-1-darker);
    border-color: var(--k-primary-pop-1-darker);
}
/* Dark mode buttons: Assuming pop colors are distinct enough. Text on buttons is --k-text-on-bright. */
/* If pop colors change in dark mode, these might need --dark-primary-pop-1 etc. */

.btn-secondary {
    background-color: var(--k-primary-pop-2);
    color: var(--k-text-on-bright);
    border-color: var(--k-primary-pop-2);
}
.btn-secondary:hover:not(:disabled) {
    background-color: var(--k-primary-pop-2-darker);
    border-color: var(--k-primary-pop-2-darker);
}

.btn-danger {
    background: var(--k-accent-red);
    color: var(--k-text-on-bright);
    border-color: var(--k-accent-red);
}
.btn-danger:hover:not(:disabled) {
    background-color: var(--k-accent-red-darker);
    border-color: var(--k-accent-red-darker);
}

.btn-confirm {
    background-color: var(--k-primary-pop-2); /* Defaulting to pop-2 for confirm */
    color: var(--k-text-on-bright);
    border-color: var(--k-primary-pop-2);
    width: 100%;
    margin-top: 1.5rem; /* Reduced margin */
    padding: 0.8rem 1.5rem; /* Reduced padding */
    font-size: 1rem; /* Reduced font size */
}
.btn-confirm:hover:not(:disabled) {
    background-color: var(--k-primary-pop-2-darker);
    border-color: var(--k-primary-pop-2-darker);
}

.btn-info { /* For "Rezept ansehen" type buttons */
    background-color: transparent;
    color: var(--k-primary-pop-1);
    border: 2px solid var(--k-primary-pop-1);
    padding: 0.5rem 1rem; /* Reduced padding */
    margin-top: 0.75rem; /* Reduced margin */
    font-size: 0.85rem; /* Reduced font size */
    text-transform: none;
    letter-spacing: normal;
}
.btn-info:hover:not(:disabled) {
    background-color: var(--k-primary-pop-1-lighter);
    color: var(--k-primary-pop-1-darker);
    border-color: var(--k-primary-pop-1);
}
body.dark-mode .btn-info {
    color: var(--k-primary-pop-1); /* Keep pop color for text */
    border-color: var(--k-primary-pop-1); /* Keep pop color for border */
}
body.dark-mode .btn-info:hover:not(:disabled) {
    background-color: var(--dark-primary-pop-1-lighter); /* Use dark mode lighter variant */
    color: var(--k-primary-pop-1-darker); /* Text can remain darker pop */
    border-color: var(--k-primary-pop-1);
}


button:disabled,
.btn-primary:disabled,
.btn-secondary:disabled,
.btn-danger:disabled,
.btn-confirm:disabled,
.btn-info:disabled {
    background-color: var(--k-border-medium) !important;
    color: var(--k-text-secondary) !important;
    border-color: var(--k-border-medium) !important;
    cursor: not-allowed !important;
    box-shadow: none !important;
    transform: none !important;
    opacity: 0.6;
}
body.dark-mode button:disabled,
body.dark-mode .btn-primary:disabled,
body.dark-mode .btn-secondary:disabled,
body.dark-mode .btn-danger:disabled,
body.dark-mode .btn-confirm:disabled,
body.dark-mode .btn-info:disabled {
    background-color: var(--dark-border-medium) !important;
    color: var(--dark-text-secondary) !important;
    border-color: var(--dark-border-medium) !important;
}


/* ERWEITERTE FILTER-UI & FORM ELEMENTS - VIBRANT STYLING */
input[type="text"],
input[type="number"],
input[type="date"],
input[type="email"],
input[type="password"],
textarea,
select {
    width: 100%;
    padding: 0.7rem 0.9rem; /* Reduced padding */
    font-size: 0.9rem; /* Reduced font size */
    font-family: 'Poppins', sans-serif;
    color: var(--k-text-primary);
    background-color: var(--k-bg-card);
    border: 2px solid var(--k-border-medium);
    border-radius: 8px;
    box-shadow: none;
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.2s ease-in-out;
    box-sizing: border-box;
}
body.dark-mode input[type="text"],
body.dark-mode input[type="number"],
body.dark-mode input[type="date"],
body.dark-mode input[type="email"],
body.dark-mode input[type="password"],
body.dark-mode textarea,
body.dark-mode select {
    background-color: var(--dark-bg-card); /* Dark input background */
    color: var(--dark-text-primary); /* Light text in inputs */
    border-color: var(--dark-border-medium);
}

input[type="text"]:focus,
input[type="number"]:focus,
input[type="date"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: var(--k-primary-pop-1);
    box-shadow: 0 0 0 3px var(--k-primary-pop-1-lighter);
}
body.dark-mode input[type="text"]:focus,
body.dark-mode input[type="number"]:focus,
body.dark-mode input[type="date"]:focus,
body.dark-mode input[type="email"]:focus,
body.dark-mode input[type="password"]:focus,
body.dark-mode textarea:focus,
body.dark-mode select:focus {
    border-color: var(--dark-primary-pop-1); /* Or use the standard pop color if it's visible enough */
    box-shadow: 0 0 0 3px var(--dark-primary-pop-1-lighter); /* Dark mode lighter glow */
}

textarea {
    height: auto;
    min-height: 100px; /* Reduced min-height */
    resize: vertical;
}
label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.4rem; /* Reduced margin */
    font-size: 0.9rem; /* Reduced font size */
    color: var(--k-text-primary);
}
label i.ti {
    color: var(--k-primary-pop-2);
    margin-right: 0.4rem; /* Reduced margin */
}

.form-group { margin-bottom: 1.25rem; } /* Reduced margin */
.form-group-inline { display: flex; gap: 1.25rem; align-items: flex-end; } /* Reduced gap */
.form-group-inline .form-group { flex: 1; margin-bottom: 0; }

.radio-group-container, .checkbox-group-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* Reduced minmax */
    gap: 0.75rem; /* Reduced gap */
}
.radio-group, .checkbox-group {
    display: flex;
    align-items: center;
    background-color: var(--k-bg-light);
    padding: 0.7rem 1rem; /* Reduced padding */
    border-radius: 8px; /* Reduced radius */
    border: 2px solid var(--k-border-light);
    transition: all 0.2s ease-in-out;
    cursor: pointer;
    box-shadow: var(--shadow-soft);
}
body.dark-mode .radio-group, body.dark-mode .checkbox-group {
    background-color: var(--dark-bg-light);
    border-color: var(--dark-border-light);
}
.radio-group:hover, .checkbox-group:hover {
    border-color: var(--k-primary-pop-2);
    box-shadow: var(--shadow-medium);
}
body.dark-mode .radio-group:hover, body.dark-mode .checkbox-group:hover {
    border-color: var(--dark-primary-pop-2);
}
.radio-group:has(input:checked), .checkbox-group:has(input:checked) {
    border-color: var(--k-primary-pop-1);
    background-color: var(--k-primary-pop-1-lighter);
    box-shadow: var(--shadow-medium);
}
body.dark-mode .radio-group:has(input:checked), body.dark-mode .checkbox-group:has(input:checked) {
    border-color: var(--dark-primary-pop-1);
    background-color: var(--dark-primary-pop-1-lighter);
}
.radio-group:has(input:checked) label, .checkbox-group:has(input:checked) label {
    color: var(--k-primary-pop-1-darker);
    font-weight: 600;
}
body.dark-mode .radio-group:has(input:checked) label, body.dark-mode .checkbox-group:has(input:checked) label {
    color: var(--dark-primary-pop-1-darker);
}
.radio-group:has(input:checked) i.ti, .checkbox-group:has(input:checked) i.ti {
    color: var(--k-primary-pop-1);
}
body.dark-mode .radio-group:has(input:checked) i.ti, body.dark-mode .checkbox-group:has(input:checked) i.ti {
    color: var(--dark-primary-pop-1);
}


.radio-group input[type="radio"], .checkbox-group input[type="checkbox"] {
    width: 1.1em; /* Reduced size */
    height: 1.1em; /* Reduced size */
    margin-right: 0.7rem; /* Reduced margin */
    accent-color: var(--k-primary-pop-1);
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    border: 2px solid var(--k-primary-pop-1); /* Pop color border for the control itself */
    border-radius: 50%;
    position: relative;
    transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
    flex-shrink: 0;
}
.checkbox-group input[type="checkbox"] {
    border-radius: 4px; /* Slightly less round for checkbox */
}
.radio-group input[type="radio"]:checked, .checkbox-group input[type="checkbox"]:checked {
    background-color: var(--k-primary-pop-1);
    border-color: var(--k-primary-pop-1);
}
.radio-group input[type="radio"]:hover, .checkbox-group input[type="checkbox"]:hover {
    border-color: var(--k-primary-pop-1-darker);
}

/* Custom checkmark/dot for radio/checkbox */
.radio-group input[type="radio"]:checked::before {
    content: '';
    display: block;
    width: 0.5em; /* Reduced dot size */
    height: 0.5em; /* Reduced dot size */
    background-color: var(--k-text-on-bright);
    border-radius: 50%;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
}
.checkbox-group input[type="checkbox"]:checked::before {
    content: '\f00c';
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: var(--k-text-on-bright);
    font-size: 0.75em; /* Reduced checkmark size */
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    line-height: 1;
}

.radio-group label, .checkbox-group label {
    margin: 0;
    font-weight: 500;
    font-size: 0.9rem; /* Reduced label text size */
    cursor: pointer;
    color: var(--k-text-secondary);
    display: flex;
    align-items: center;
}
.radio-group label i.ti, .checkbox-group label i.ti {
    margin-right: 0.4rem; /* Reduced margin */
    color: var(--k-text-secondary);
    transition: color 0.2s ease-in-out;
}


select#cuisine-style {
    appearance: none;
    -webkit-appearance: none;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FF6B6B%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.4-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 0.9rem center; /* Adjusted position */
    background-size: 0.8em; /* Adjusted size */
    padding-right: 2.5rem; /* Reduced padding */
}
/* Dark mode select arrow might need a different color if FF6B6B (Coral Pink) is not visible */
/* For now, keeping it the same. If an issue, replace the fill color in the SVG data URI. */

fieldset {
    border: 2px solid var(--k-primary-pop-2-lighter);
    padding: 1.5rem 2rem; /* Reduced padding */
    border-radius: 8px; /* Reduced radius */
    margin-bottom: 2rem; /* Reduced margin */
    box-shadow: var(--shadow-soft);
}
body.dark-mode fieldset {
    border-color: var(--dark-primary-pop-2-lighter);
}


/* Styling for the Generator Form for better horizontal layout */
#generator-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem; /* Reduced gap */
}

#generator-form .form-group-inline,
#generator-form .generator-filter-grid {
    width: 100%;
}

/* Adjusting the generator-filter-grid for potentially single fieldset */
.generator-filter-grid {
    display: block;

    margin-bottom: 1rem; /* Reduced margin */
}

/* Ensure Spezielle Eigenschaften (dynamic tags) flows horizontally if many tags */
#dynamic-tags-checkboxes.checkbox-group-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem; /* Reduced gap */
    justify-content: flex-start;
}

#dynamic-tags-checkboxes .checkbox-group {
    padding: 0.6rem 0.8rem; /* Reduced padding */

}


/* Original .generator-filter-grid - can be removed or adapted if it's no longer a grid of fieldsets */
/* .generator-filter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 2.5rem;
} */
.generator-filter-grid fieldset {
    margin-bottom: 0;
}

/* Ensure the button has some top margin */
.generator-submit-btn {
    margin-top: 1rem; /* Reduced margin */
    align-self: flex-start;
}


fieldset legend {
    color: var(--k-primary-pop-2);
    font-weight: 700;
    padding: 0 0.75rem; /* Reduced padding */
    font-size: 1.1rem; /* Reduced font size */
}
fieldset legend i.ti {
    margin-right: 0.5rem; /* Reduced margin */
}
/* textarea styles are now part of the general input/textarea block */
/* textarea:focus - Handled by general textarea:focus */

/* SHOPPING LIST - MINI CARDS */
.shopping-list-category {
    margin-bottom: 2rem; /* Reduced margin */
}
.shopping-list-category h3 {
    color: var(--k-primary-pop-2);
    border-bottom: 2px solid var(--k-primary-pop-2-lighter);
    padding-bottom: 0.4rem; /* Reduced padding */
    margin-bottom: 1rem; /* Reduced margin */
    font-size: 1.4rem; /* Reduced font size */
}
body.dark-mode .shopping-list-category h3 {
    color: var(--dark-primary-pop-2);
    border-bottom-color: var(--dark-primary-pop-2-lighter);
}
.shopping-list-category h3 i.ti {
    margin-right: 0.6rem; /* Reduced margin */
    color: var(--k-primary-pop-2);
}
body.dark-mode .shopping-list-category h3 i.ti {
    color: var(--dark-primary-pop-2);
}

.shopping-list-items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
}

.shopping-list-item-card {
    background-color: var(--k-bg-card);
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: var(--shadow-medium);
    border-left: 5px solid var(--k-accent-vibrant-yellow);
    transition: all 0.2s ease-in-out;
    display: flex;
    flex-direction: column;
    position: relative;
}
body.dark-mode .shopping-list-item-card {
    background-color: var(--dark-bg-card);
    border-left-color: var(--k-accent-vibrant-yellow); /* Assuming yellow is visible, or use a dark-mode specific accent */
}
.shopping-list-item-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-strong);
}

.item-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.75rem;
}
.item-card-header h4 {
    font-size: 1.15rem;
    font-weight: 600;
    color: var(--k-text-primary);
    margin-right: 0.5rem;
    line-height: 1.3;
}
.item-card-header .combined-icon {
    color: var(--k-text-secondary);
    font-size: 0.9em;
    margin-left: 0.3rem;
}
.item-card-header .have-at-home-icon {
    color: var(--k-primary-pop-2);
    font-size: 1.3em;
    flex-shrink: 0;
}
body.dark-mode .item-card-header .have-at-home-icon {
    color: var(--dark-primary-pop-2);
}

.item-card-body .total-quantity {
    font-size: 1rem;
    font-weight: 500;
    color: var(--k-text-secondary);
    display: flex;
    align-items: center;
    margin-bottom: 0.75rem;
}
.item-card-body .total-quantity i.ti {
    color: var(--k-primary-pop-1);
    margin-right: 0.5rem;
}
body.dark-mode .item-card-body .total-quantity i.ti {
    color: var(--dark-primary-pop-1);
}

.shopping-list-item-card .source-list {
    list-style: none;
    padding: 0.75rem 0 0 0;
    margin-top: 0.75rem;
    border-top: 1px solid var(--k-border-light);
    font-size: 0.85rem;
}
body.dark-mode .shopping-list-item-card .source-list {
    border-top-color: var(--dark-border-light);
}
.shopping-list-item-card .source-list li {
    color: var(--k-text-secondary);
    margin-bottom: 0.3rem;
    display: flex;
    align-items: center;
}
.shopping-list-item-card .source-list li i.ti {
    font-size: 0.9em;
    margin-right: 0.4rem;
    color: var(--k-text-secondary);
}

/* Styling for "Have at Home" items */
.shopping-list-item-card.have-at-home {
    border-left-color: var(--k-primary-pop-2);
    background-color: var(--k-primary-pop-2-lighter);
}
body.dark-mode .shopping-list-item-card.have-at-home {
    border-left-color: var(--dark-primary-pop-2);
    background-color: var(--dark-primary-pop-2-lighter);
}
.shopping-list-item-card.have-at-home .item-card-header h4 {

}
.shopping-list-item-card.have-at-home .total-quantity i.ti {
    color: var(--k-primary-pop-2-darker);
}
body.dark-mode .shopping-list-item-card.have-at-home .total-quantity i.ti {
    color: var(--dark-primary-pop-2-darker);
}


/* MODAL, FOOTER, etc. - VIBRANT STYLING */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--k-bg-overlay);
    display: flex; justify-content: center; align-items: center;
    z-index: 2000;
    opacity: 0; visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
.modal-overlay:not(.hidden) { opacity: 1; visibility: visible; }

.modal-content {
    background-color: var(--k-bg-card);
    padding: 2rem;
    border-radius: 12px;
    box-shadow: var(--shadow-strong);
    width: 90%; max-width: 700px;
    max-height: 85vh;
    overflow-y: auto;
    position: relative;
    transform: scale(0.95) translateY(10px);
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}
body.dark-mode .modal-content {
    background-color: var(--dark-bg-card);
    /* box-shadow: 0 8px 25px rgba(0,0,0,0.4); */ /* Optional: stronger shadow for dark modal */
}
.modal-overlay:not(.hidden) .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
}
.modal-close-btn {
    position: absolute;
    top: 1rem; right: 1.25rem;
    background: var(--k-primary-pop-1);
    color: var(--k-text-on-bright);
    border: none;
    font-size: 1.2rem;
    line-height: 1;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-medium);
    transition: background-color 0.2s, transform 0.2s;
}
body.dark-mode .modal-close-btn {
    background: var(--dark-primary-pop-1);
    color: var(--dark-text-on-bright); /* If pop color changes, text might need to adapt */
}
.modal-close-btn:hover {
    background-color: var(--k-primary-pop-1-darker);
    transform: rotate(90deg) scale(1.1);
}
body.dark-mode .modal-close-btn:hover {
    background-color: var(--dark-primary-pop-1-darker);
}

#modal-body h2 {
    color: var(--k-primary-pop-1);
    border-bottom: 3px solid var(--k-primary-pop-1-lighter);
    padding-bottom: 0.8rem;
    margin-bottom: 1.75rem;
    font-size: 2rem;
    text-align: center;
}
body.dark-mode #modal-body h2 {
    color: var(--dark-primary-pop-1);
    border-bottom-color: var(--dark-primary-pop-1-lighter);
}
#modal-body h2 i.ti { color: var(--k-primary-pop-1); }
body.dark-mode #modal-body h2 i.ti { color: var(--dark-primary-pop-1); }

#modal-body h3 {
    color: var(--k-primary-pop-2);
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-size: 1.5rem;
    border-left: 4px solid var(--k-primary-pop-2);
    padding-left: 0.75rem;
}
body.dark-mode #modal-body h3 {
    color: var(--dark-primary-pop-2);
    border-left-color: var(--dark-primary-pop-2);
}
#modal-body h3 i.ti { color: var(--k-primary-pop-2); }
body.dark-mode #modal-body h3 i.ti { color: var(--dark-primary-pop-2); }

#modal-body .ingredient-list, #modal-body .instructions-list { list-style: none; padding: 0; }

#modal-body .ingredient-list li {
    background-color: var(--k-primary-pop-1-lighter);
    color: var(--k-text-primary);
    padding: 0.85rem 1.25rem;
    border-radius: 8px;
    margin-bottom: 0.6rem;
    display: flex;
    justify-content: space-between;
    font-size: 1rem;
    font-weight: 500;
    box-shadow: var(--shadow-soft);
    border-left: 4px solid var(--k-primary-pop-1);
}
body.dark-mode #modal-body .ingredient-list li {
    background-color: var(--dark-primary-pop-1-lighter);
    color: var(--dark-text-primary); /* Ensure text is readable on dark lighter pop bg */
    border-left-color: var(--dark-primary-pop-1);
}
#modal-body .ingredient-list li i.ti { color: var(--k-primary-pop-1); margin-right: 0.6rem; }
body.dark-mode #modal-body .ingredient-list li i.ti { color: var(--dark-primary-pop-1); }

#modal-body .instructions-list li {
    padding: 0.8rem 0.25rem;
    border-bottom: 1px solid var(--k-border-medium);
    line-height: 1.7;
    font-size: 1rem;
    color: var(--k-text-secondary);
}
body.dark-mode #modal-body .instructions-list li {
    border-bottom-color: var(--dark-border-medium);
}
#modal-body .instructions-list li strong { color: var(--k-text-primary); }
#modal-body .instructions-list li:last-child { border-bottom: none; }

footer {
    text-align: center;
    padding: 1.5rem 1rem;
    color: var(--k-text-secondary);
    margin-top: 4rem;
    background-color: var(--k-primary-pop-2-lighter);
    border-top: 3px solid var(--k-primary-pop-2);
}
body.dark-mode footer {
    background-color: var(--dark-primary-pop-2-lighter);
    border-top-color: var(--dark-primary-pop-2);
    color: var(--dark-text-secondary);
}
footer .container {
    display: flex;
    align-items: center;
    justify-content: center;
}
footer i.fa-heart {
    color: var(--k-primary-pop-1);
    font-size: 1.2em;
    margin: 0 0.25em; /* Add a little space around the heart */
}
/* LOADING SCREEN */
#loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #ffffff; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.5s ease-out; }
#loading-screen .logo-container { width: 120px; height: 120px; background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSIjMkE5RDhGIiBkPSJNNTAsMCBDNjAsMjAgODUsMjUgOTUsNTAgQzcwLDYwIDcwLDg1IDUwLDEwMCBDMzAsODUgMzAsNjAgNSw1MCBDMTUsMjUgNDAsMjAgNTAsMCBaIi8+PHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI4IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHBvaW50cz0iMzAsNTUgNDUsNzAgNzAsNDAiLz48L3N2Zz4='); background-size: contain; background-repeat: no-repeat; animation: pulse 1.5s infinite ease-in-out; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

/* RESPONSIVE DESIGN - Reviewed and Refined for VIBRANT THEME */
@media (max-width: 1024px) { /* Adding a new breakpoint for larger tablets / smaller desktops */
    /* .main-layout { gap: 1.5rem; } */ /* No longer needed as aside is gone */
    /* aside.main-nav { flex: 0 0 200px; padding-right: 1rem; } */ /* Removed */
    .container { padding: 1.5rem; } /* Adjust container padding */
    h1 { font-size: 2.25rem; }
    h2 { font-size: 1.75rem; }
    h3 { font-size: 1.4rem; }
    .recipe-options { gap: 1.5rem; }
    .shopping-list-items-grid { gap: 1rem; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); }
}

@media (max-width: 992px) { /* Tablet and below */
    /* .main-layout flex-direction is already column from previous CSS, gap is fine */
    /* aside.main-nav styles are removed */

    header .container {
        flex-direction: column; /* Stack logo and nav vertically */
        align-items: flex-start; /* Align items to the start */
    }
    #logo {
        margin-bottom: 0.75rem; /* Space below logo when stacked */
    }
    #main-header-nav {
        width: 100%; /* Make nav take full width */
        justify-content: space-around; /* Distribute nav items */
        flex-wrap: wrap; /* Allow nav items to wrap */
        gap: 0.25rem; /* Smaller gap for wrapped items */
    }
    .nav-item { /* Adjust nav items for smaller screens / wrapping */
        flex-grow: 1; /* Allow items to grow and fill space */
        justify-content: center; /* Center text/icon within item */
        font-size: 0.9rem; /* Slightly smaller font */
        padding: 0.7rem 0.5rem; /* Adjust padding */
    }
    .nav-item i.ti {
         margin-right: 0.4rem; /* Adjust icon margin */
         font-size: 1em;
    }

    .form-group-inline {
        flex-direction: column;
        gap: 1rem;
    }
    .form-group-inline .form-group {
        margin-bottom: 1rem;
    }
    .form-group-inline .form-group:last-child {
        margin-bottom: 0;
    }
    .card { padding: 2rem; } /* Slightly reduce main card padding */
    .day-container h3 { font-size: 1.6rem; margin-bottom: 1.5rem;}
    .recipe-card { padding: 1rem; }
}

@media (max-width: 768px) { /* Smaller tablets / large phones */
    .container { padding: 1rem 1.25rem; }

    h1#logo { font-size: 1.6rem; }
    h1 { font-size: 2.25rem; } /* Adjusted from previous version */
    h2 { font-size: 1.8rem; } /* Adjusted */
    h3 { font-size: 1.5rem; } /* Adjusted */
    h4 { font-size: 1.15rem; }

    /* .nav-item rules are now handled in the 992px breakpoint for #main-header-nav .nav-item */
    /* .nav-item i rules are now handled in the 992px breakpoint for #main-header-nav .nav-item i.ti */

    .recipe-options { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.25rem; }
    .shopping-list-items-grid { grid-template-columns: 1fr; gap: 1rem; } /* Stack shopping list cards */

    .empty-state-banner {
        padding: 4rem 1.5rem; /* More vertical padding */
        border-radius: 20px;
         background-image: linear-gradient(135deg, var(--k-primary-pop-1-lighter), var(--k-primary-pop-2-lighter)),
                          url('https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=1200&auto=format&fit=crop');
    }
    .banner-content { padding: 2.5rem; border-radius: 12px; }
    .banner-content h2 { font-size: 2rem; margin-bottom: 1rem; } /* Larger heading for banner */

    .plan-header {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem; /* Increased gap */
    }
    .plan-header h2 { margin-bottom: 0.5rem; font-size:1.8rem; /* Match other h2 */ }
    #delete-plan-btn { width: 100%; }

    .modal-content {
        width: calc(100% - 2.5rem); /* More margin */
        margin: 1.25rem;
        padding: 1.75rem; /* More padding */
        max-height: 88vh;
    }
    .modal-close-btn { font-size: 1.1rem; top: 1rem; right: 1rem; width:30px; height:30px; }
    #modal-body h2 { font-size: 1.75rem; }
    #modal-body h3 { font-size: 1.35rem; }
    #modal-body .ingredient-list li, #modal-body .instructions-list li { font-size: 0.95rem; }


    .btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info {
        padding: 0.75rem 1.5rem; /* Slightly larger base padding */
        font-size: 0.95rem; /* Slightly larger base font */
    }
    .btn-confirm { font-size: 1.05rem; padding: 0.9rem 1.5rem; }
    .card { padding: 1.75rem; } /* Reduce general card padding */
}

@media (max-width: 576px) { /* Mobile phones */
    body { font-size: 16px; /* Keep base font size slightly larger for readability */ }
    .container { padding: 1rem 1rem; } /* More consistent padding */

    h1#logo {
        text-align: center; /* This will be overridden by flex settings for children but can affect block itself if not display:flex */
        width: 100%;
        font-size: 1.75rem;
        justify-content: center; /* Center flex items (image and text) */
    }
    header .container { padding: 1.25rem 1rem; }
    h1 { font-size: 2rem; } /* Larger h1 */
    h2 { font-size: 1.65rem; } /* Larger h2 */
    h3 { font-size: 1.4rem; } /* Larger h3 */
    .day-container h3 { font-size: 1.5rem; } /* Day titles also larger */


    /* .main-nav nav styles are removed */
    /* .nav-item styles for this breakpoint are handled by #main-header-nav .nav-item at 992px,
       but we might want to make them stack vertically if header also stacks logo/nav earlier.
       The current 992px rule already makes header container flex-direction: column.
       And #main-header-nav becomes full width with items spaced out/wrapping.
       If we want individual nav items to stack here, we'd target #main-header-nav itself.
    */
    #main-header-nav { /* If nav items should stack vertically on smallest screens */
        flex-direction: column;
        align-items: stretch; /* Make nav items take full width */
        gap: 0.5rem;
    }
    #main-header-nav .nav-item {
        width: 100%; /* Ensure full width when stacked */
        justify-content: flex-start; /* Align text to left */
        font-size: 1rem; /* Reset or adjust font size */
        padding: 0.8rem 1rem; /* Adjust padding */
    }


    .recipe-card { padding: 1.25rem; } /* More padding in recipe cards */
    .recipe-card-image { height: 170px; }
    .recipe-card h4 { font-size: 1.15rem; }
    .recipe-card .tags span { font-size: 0.75rem; padding: .4em .9em; }
    .shopping-list-item-card { padding: 1rem; } /* Adjust shopping card padding */
    .item-card-header h4 { font-size: 1.05rem;}


    .empty-state-banner { padding: 3rem 1rem; }
    .banner-content { padding: 2rem; }
    .banner-content h2 { font-size: 1.75rem; }
    .banner-content p { font-size: 1rem; }

    .radio-group-container, .checkbox-group-container {
        grid-template-columns: 1fr;
        gap: 0.85rem;
    }
    .radio-group, .checkbox-group { padding: 0.75rem 1rem; }
    .radio-group input[type="radio"], .checkbox-group input[type="checkbox"] { margin-right: 0.75rem; }
    .radio-group label, .checkbox-group label { font-size: 0.95rem; }


    #pantry-item-details { flex-direction: column; gap: 1rem; }
    #pantry-item-details .form-group { width: 100%; }

    .btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info {
        padding: 0.8rem 1.5rem; /* Maintain decent button size */
        font-size: 0.95rem;
    }
    .btn-confirm { font-size: 1.1rem; }
}

/* Styles for new inventory (Mein Vorrat) section - Ensure responsive behavior */
#add-pantry-item-form {
    margin-bottom: 2rem;
    position: relative; /* For suggestions positioning */
}

#pantry-item-search {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid var(--k-border-light);
    border-radius: 8px;
    background-color: var(--k-bg-card);
    font-family: 'Poppins', sans-serif;
    color: var(--k-text-primary);
    box-sizing: border-box; /* Ensures padding doesn't add to width */
}
#pantry-item-search:focus {
    outline: none;
    border-color: var(--k-primary-1);
    box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.2);
}

.suggestions-list {
    position: absolute;
    width: 100%;
    background-color: var(--k-bg-card);
    border: 1px solid var(--k-border-light);
    border-top: none;
    border-radius: 0 0 8px 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    z-index: 100;
    max-height: 200px;
    overflow-y: auto;
}
.suggestions-list.hidden {
    display: none;
}
.suggestions-list ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.suggestions-list li {
    padding: 0.75rem 1rem;
    cursor: pointer;
    font-size: 0.95rem;
    color: var(--k-text-secondary);
}
.suggestions-list li:hover {
    background-color: var(--k-primary-1-light);
    color: var(--k-text-primary);
}

#pantry-item-details {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding: 1rem;
    background-color: var(--k-bg-light); /* Slightly different background to group them */
    border-radius: 8px;
    border: 1px solid var(--k-border-light);
}
#pantry-item-details .form-group input {
     width: 100%; /* Make inputs take full width of their group */
     padding: 0.5rem 0.8rem; /* Smaller padding for these inputs */
     font-size: 0.9rem;
     box-sizing: border-box;
     border: 1px solid var(--k-border-light);
     border-radius: 6px;
}
#pantry-item-details .form-group input:focus {
    border-color: var(--k-primary-1);
    box-shadow: 0 0 0 2px rgba(230, 126, 34, 0.15);
    outline: none;
}
#pantry-item-details .form-group label {
    font-size: 0.85rem;
    margin-bottom: 0.3rem;
    display: block;
}


#add-item-to-pantry-btn {
    margin-top: 1rem;
    /* Use existing btn-primary styles, specific overrides if needed */
}

hr.section-divider {
    border: none;
    border-top: 1px solid var(--k-border-dark);
    margin: 2.5rem 0;
}

#current-pantry-section h3 {
    margin-bottom: 1rem;
}

#current-pantry-display ul.current-pantry-list {
    list-style: none;
    padding: 0;
}

#current-pantry-display li.pantry-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    background-color: var(--k-bg-light);
    border-radius: 8px;
    border-left: 4px solid var(--k-primary-2); /* Green accent */
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
#current-pantry-display li.pantry-list-item span {
    flex-grow: 1;
    font-size: 0.95rem;
}

#current-pantry-display .btn-remove-pantry-item {
    background: none;
    border: none;
    color: var(--k-accent-red);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0.25rem 0.5rem;
    margin-left: 1rem;
}
#current-pantry-display .btn-remove-pantry-item:hover {
    color: #C0392B; /* Darker red */
}

#empty-pantry-message {
    text-align: center;
    color: var(--k-text-secondary);
    padding: 1rem;
    background-color: var(--k-bg-light);
    border-radius: 8px;
}
body.dark-mode #empty-pantry-message {
    background-color: var(--dark-bg-light); /* Or dark-bg-card if preferred */
}
#find-recipes-from-pantry-btn {
    margin-top: 1.5rem; /* Space above this button */
}

/* SHOPPING LIST CARD STYLES - Also used by current-pantry-display items */
.shopping-list-items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.5rem;
    padding-top: 1rem;
}

.shopping-list-item-card, /* Applied to shopping list */
#current-pantry-display li.pantry-list-item /* Applied to pantry items */ {
    background-color: var(--k-bg-card);
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: var(--shadow-medium);
    /* border-left was specific to shopping list item, pantry has its own */
    transition: all 0.2s ease-in-out;
    display: flex;
    flex-direction: column;
}
/* pantry-list-item specific border already exists, shopping list specific below */
.shopping-list-item-card {
    border-left: 5px solid var(--k-accent-vibrant-blue);
    position: relative; /* For absolute positioned icons in shopping list items */
}
body.dark-mode .shopping-list-item-card,
body.dark-mode #current-pantry-display li.pantry-list-item {
    background-color: var(--dark-bg-card);
    /* border-left-color for shopping list might need adjustment if accent blue is not good on dark */
}
body.dark-mode .shopping-list-item-card {
    border-left-color: var(--k-accent-vibrant-blue); /* Re-assert or change for dark mode */
}
/* pantry-list-item specific border in dark mode */
body.dark-mode #current-pantry-display li.pantry-list-item {
    border-left-color: var(--dark-primary-pop-2); /* Use dark pop 2 for pantry items */
}


.shopping-list-item-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-strong);
}
/* No hover for pantry list items for now, can be added if desired */

.item-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--k-border-light);
    padding-bottom: 0.75rem;
}
body.dark-mode .item-card-header {
    border-bottom-color: var(--dark-border-light);
}
.item-card-header h4 {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--k-text-primary);
    margin-right: 0.5rem;
    line-height: 1.3;
    flex-grow: 1;
}
.item-card-header .combined-icon {
    color: var(--k-text-secondary);
    font-size: 0.9em;
    margin-left: 0.4rem;
    vertical-align: middle;
}
.item-card-header .have-at-home-icon {
    color: var(--k-primary-pop-2);
    font-size: 1.5em;
    flex-shrink: 0;
    margin-left: 0.5rem;
}
body.dark-mode .item-card-header .have-at-home-icon {
    color: var(--dark-primary-pop-2);
}

.item-card-body .unit-entry {
    margin-bottom: 0.75rem;
}
.item-card-body .unit-entry:last-child {
    margin-bottom: 0;
}

.item-card-body .total-quantity {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--k-text-primary);
    display: flex;
    align-items: center;
    margin-bottom: 0.5rem;
}
.item-card-body .total-quantity i {
    color: var(--k-primary-pop-1);
    margin-right: 0.6rem;
    font-size: 1.1em;
}
body.dark-mode .item-card-body .total-quantity i {
    color: var(--dark-primary-pop-1);
}


.shopping-list-item-card .source-list {
    list-style: none;
    padding: 0.5rem 0 0 0;
    margin-top: 0.5rem;
    border-top: 1px dashed var(--k-border-medium);
    font-size: 0.9rem;
}
body.dark-mode .shopping-list-item-card .source-list {
    border-top-color: var(--dark-border-medium);
}
.shopping-list-item-card .source-list li {
    color: var(--k-text-secondary);
    margin-bottom: 0.4rem;
    display: flex;
    align-items: center;
}
.shopping-list-item-card .source-list li:last-child {
    margin-bottom: 0;
}
.shopping-list-item-card .source-list li i {
    font-size: 0.9em;
    margin-right: 0.5rem;
    color: var(--k-text-secondary);
    width: 16px;
    text-align: center;
}

/* Styling for "Have at Home" items */
.shopping-list-item-card.have-at-home {
    border-left-color: var(--k-primary-pop-2);
    background-color: var(--k-primary-pop-2-lighter);
}
body.dark-mode .shopping-list-item-card.have-at-home {
    border-left-color: var(--dark-primary-pop-2);
    background-color: var(--dark-primary-pop-2-lighter);
}
.shopping-list-item-card.have-at-home .item-card-header h4 {

}
.shopping-list-item-card.have-at-home .total-quantity i {
    color: var(--k-primary-pop-2-darker);
}
body.dark-mode .shopping-list-item-card.have-at-home .total-quantity i {
    color: var(--dark-primary-pop-2-darker);
}
.shopping-list-item-card.have-at-home .item-card-header .have-at-home-icon {

}

/* Responsive adjustments for shopping list cards if needed */
@media (max-width: 576px) { /* Mobile phones */
    .shopping-list-items-grid {
        grid-template-columns: 1fr; /* Stack cards on smallest screens */
        gap: 1rem;
    }
    .shopping-list-item-card {
        padding: 1rem;
    }
    .item-card-header h4 {
        font-size: 1.1rem;
    }
    .item-card-body .total-quantity {
        font-size: 1rem;
    }
    .shopping-list-item-card .source-list {
        font-size: 0.85rem;
    }
}

/* Checkbox styling for shopping list items */
.shopping-list-item-checkbox {
    margin-right: 0.75rem;
    transform: scale(1.3); /* Make checkbox slightly larger */
    accent-color: var(--k-primary-pop-1);
    cursor: pointer;
    align-self: center; /* Align checkbox with the text if header is flex and align-items start */
}

.item-card-header {
    /* Ensure items are vertically centered if checkbox makes header taller */
    align-items: center;
}


/* Styling for collected shopping list items */
.shopping-list-item-card.collected {
    opacity: 0.65;
    background-color: var(--k-bg-light); /* Lighten background slightly or use a specific color */
}
body.dark-mode .shopping-list-item-card.collected {
    background-color: var(--dark-bg-light); /* Adjust for dark mode */
    opacity: 0.5;
}

.shopping-list-item-card.collected .item-card-header h4,
.shopping-list-item-card.collected .item-card-body {
    text-decoration: line-through;
    text-decoration-color: var(--k-accent-red);
}
body.dark-mode .shopping-list-item-card.collected .item-card-header h4,
body.dark-mode .shopping-list-item-card.collected .item-card-body {
    text-decoration-color: var(--dark-accent-red);
}

/* Confirmation Dialog Specific Styles */
.confirm-dialog h3 {
    margin-top: 0;
    font-size: 1.6rem; /* Slightly larger for emphasis */
    color: var(--k-text-primary);
    margin-bottom: 1rem;
    text-align: center;
    border-bottom: 2px solid var(--k-primary-pop-1-lighter);
    padding-bottom: 0.75rem;
}
body.dark-mode .confirm-dialog h3 {
    color: var(--dark-text-primary);
    border-bottom-color: var(--dark-primary-pop-1-lighter);
}

.confirm-dialog p {
    margin-bottom: 2rem; /* More space before buttons */
    font-size: 1.1em;
    line-height: 1.6;
    text-align: center;
    color: var(--k-text-secondary);
}
body.dark-mode .confirm-dialog p {
    color: var(--dark-text-secondary);
}

.confirm-dialog-actions {
    display: flex;
    justify-content: center; /* Center buttons */
    gap: 1.5rem; /* More space between buttons */
}

.confirm-dialog-actions .btn-confirm,
.confirm-dialog-actions .btn-danger {
    padding: 0.75rem 1.75rem; /* More padding for better click target */
    font-size: 1rem; /* Standard button font size */
    display: flex;
    align-items: center;
    gap: 0.6rem;
    min-width: 180px; /* Ensure buttons have a decent minimum width */
    justify-content: center;
}

/* Adjust modal content for confirm dialog */
.modal-content.confirm-dialog {
    max-width: 550px; /* Slightly wider for better text flow */
    background-color: var(--k-bg-card); /* Use card background for consistency */
    color: var(--k-text-primary);
    text-align: left; /* Reset text-align if inherited */
    padding: 2rem 2.5rem; /* Generous padding */
}
body.dark-mode .modal-content.confirm-dialog {
    background-color: var(--dark-bg-card);
    color: var(--dark-text-primary);
}