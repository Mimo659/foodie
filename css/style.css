/* IMPORTS & GLOBALE VARIABLEN */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
:root {
    /* Original Palette (some might be overridden or kept for specific uses) */
    --primary-color: #2A9D8F; /* Original Teal */
    --primary-dark: #264653; /* Original Dark Blue/Teal */
    --accent-color: #E9C46A; /* Original Yellow */
    --accent-highlight: #F4A261; /* Original Orange */
    --danger-color: #E76F51; /* Original Coral Red */
    --background-color: #F7F9FA; /* Original Light Gray BG */
    --card-bg-color: #FFFFFF; /* Original White Card BG */
    --text-color: #264653; /* Original Dark Text */
    --subtle-text-color: #8D99AE; /* Original Gray Text */
    --border-color: #E9ECEF; /* Original Light Border */
    --shadow: 0 4px 12px rgba(38, 70, 83, 0.08);
    --shadow-hover: 0 8px 20px rgba(38, 70, 83, 0.12);

    /* New Kitchen-Friendly Harmonious & Colorful Palette */
    --k-bg-light: #FEFDFB; /* Warm Cream BG */
    --k-bg-card: #FFFFFF; /* Card BG - keeping white for now */

    --k-text-primary: #3D2C2A; /* Dark Brown for primary text */
    --k-text-secondary: #7A6A61; /* Softer Brown for secondary text */

    --k-primary-1: #E67E22; /* Carrot Orange */
    --k-primary-2: #2ECC71; /* Emerald Green */

    --k-accent-red: #E74C3C; /* Tomato Red */
    --k-accent-yellow: #F1C40F; /* Sunny Yellow */
    --k-accent-blue: #3498DB; /* Cornflower Blue */
    --k-accent-purple: #9B59B6; /* Plum Purple */
    --k-accent-teal: #1ABC9C; /* Teal (can reuse from original or new) */
    --k-accent-terracotta: #E2725B; /* Terracotta */

    --k-border-light: #E0DCDA; /* Light, warm border */
    --k-border-dark: #BCAAA4;  /* Darker, warm border */

    /* Helper lighter shade for hovers etc. */
    --k-primary-1-light: #FADFC5; /* Lighter version of Carrot Orange */
    --k-primary-2-light: #C8F7DC; /* Lighter version of Emerald Green */
}
body { font-family: 'Poppins', sans-serif; margin: 0; background-color: var(--k-bg-light); color: var(--k-text-primary); line-height: 1.6; }
.container { max-width: 1200px; margin: 0 auto; padding: 1rem 2rem; }
h1, h2, h3, h4 { color: var(--k-text-primary); } /* Changed default heading color to new primary text color */
i.fa-solid { margin-right: 0.8rem; width: 20px; text-align: center; }

/* HEADER & NAVIGATION */
header { background: var(--primary-dark); color: white; padding: 0.75rem 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
#logo { font-weight: 700; font-size: 1.75rem; color: white; /* Ensure logo text is white on dark header */ }
#logo i { color: white; /* Ensure icon is also white, already was but good to be explicit */ }
.main-layout { display: flex; gap: 2rem; align-items: flex-start; margin-top: 2rem; }
aside.main-nav { flex: 0 0 220px; position: sticky; top: 2rem; }
main.main-content { flex: 1; }
.main-nav nav { display: flex; flex-direction: column; gap: 0.5rem; }
.nav-item { display: flex; align-items: center; padding: 1rem; text-decoration: none; color: var(--k-text-secondary); font-weight: 500; border-radius: 8px; transition: all 0.2s ease-in-out; } /* Changed to k-text-secondary */
.nav-item i { color: var(--k-text-secondary); transition: color 0.2s ease-in-out; } /* Changed to k-text-secondary */
.nav-item:hover { background-color: var(--k-primary-1-light); color: var(--k-text-primary); }
.nav-item.active { background-color: var(--k-primary-1); color: white; font-weight: 600; box-shadow: var(--shadow); }
.nav-item.active i { color: white; }
/* .nav-item i { color: var(--k-text-secondary); } */ /* This was redundant due to above change, icon color now set directly on .nav-item i */
.nav-item:hover i, .nav-item.active i { color: white; /* Icon color on hover/active */ }


/* BANNER & SEKTIONEN */
.empty-state-banner { background: linear-gradient(135deg, rgba(230, 126, 34, 0.1), rgba(241, 196, 15, 0.1)), url('https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=2070&auto=format&fit=crop') center center/cover; padding: 4rem 2rem; border-radius: 24px; text-align: center; }
.banner-content { background-color: rgba(254, 253, 251, 0.85); /* Slightly opaque --k-bg-light */ display: inline-block; padding: 2.5rem; border-radius: 16px; backdrop-filter: blur(5px); }
h2 { font-size: 2rem; font-weight: 700; margin-top: 0; margin-bottom: 1.5rem; }

/* Image specific CSS */
.recipe-card-image {
    width: 100%;
    height: 180px; /* Or your desired height */
    object-fit: cover; /* Ensures the image covers the area, might crop */
    border-radius: 8px 8px 0 0; /* Optional: if you want rounded corners at the top */
    margin-bottom: 1rem; /* Space between image and card content */
}
.plan-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
.plan-instructions { text-align: center; color: var(--primary-dark); background-color: #e3f2fd; padding: 0.75rem; border-radius: 8px; margin-bottom: 2rem; }
.card { background-color: var(--card-bg-color); padding: 2.5rem; border-radius: 16px; box-shadow: var(--shadow); margin-bottom: 2.5rem; border: 1px solid var(--border-color); }
#dashboard-view .card { box-shadow: none; border: none; padding: 0; }
.view.hidden { display: none; }

/* REZEPTKARTEN */
.day-container { margin-bottom: 2.5rem; }
.day-container h3 { font-size: 1.5rem; font-weight: 600; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border-color); }
.recipe-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
.recipe-card { background: var(--card-bg-color); border: 3px solid transparent; padding: 1.5rem; border-radius: 12px; box-shadow: var(--shadow); transition: all 0.3s ease; cursor: pointer; display: flex; flex-direction: column; }
.recipe-card > *:last-child { margin-top: auto; }
.recipe-card.selected { border-color: var(--k-primary-1); transform: translateY(-5px) scale(1.02); box-shadow: var(--shadow-hover); }
.recipe-card:not(.selected) { opacity: 0.85; /* Slightly less opacity difference */ }
.recipe-card:hover { opacity: 1; transform: translateY(-5px); }
.recipe-card h4 { margin-top: 0; font-size: 1.25rem; font-weight: 600; color: var(--k-text-primary); }

/* Colorful tags */
.recipe-card .tags span { display: inline-block; padding: .3em .8em; font-size: .8rem; font-weight: 600; border-radius: 20px; margin: 0.2rem 0.1rem; color: white; }
.tags span i { margin-right: 0.4rem; font-size: 0.7rem; }

/* Specific styling for price tag, ensuring it's distinct */
.recipe-card .tags span.price-tag { background-color: var(--k-primary-2); color: white; }

/* Styling for other tags, cycling through accent colors. Exclude .price-tag from this general cycling. */
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+1) { background-color: var(--k-accent-terracotta); }
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+2) { background-color: var(--k-accent-teal); }
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+3) { background-color: var(--k-accent-purple); }
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+4) { background-color: var(--k-accent-yellow); color: var(--k-text-primary); /* Yellow needs dark text */ }
/* If there's only one non-price tag, give it a specific color */
.recipe-card .tags span:not(.price-tag):only-of-type { background-color: var(--k-accent-blue); }


.recipe-card .match-info { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--k-border-light); }
.match-info .match-bar { width: 100%; height: 12px; background-color: var(--k-border-light); border-radius: 6px; overflow: hidden; margin-bottom: 0.5rem; }
.match-info .match-bar-fill { height: 100%; background: linear-gradient(90deg, var(--k-accent-yellow), var(--k-primary-1)); border-radius: 6px; transition: width 0.5s ease-in-out; }
.match-info .match-text { font-size: 0.9rem; font-weight: 500; color: var(--k-text-secondary); }
.match-info .missing-ingredients { font-size: 0.9rem; color: var(--k-accent-red); margin-top: 0.5rem; }
.match-info .all-ingredients-present { font-size: 0.9rem; color: var(--k-primary-2); font-weight: 600; margin-top: 0.5rem; }
.missing-ingredients strong { font-weight: 600; }

/* BUTTONS */
.btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info { display: inline-flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1rem; text-align: center; cursor: pointer; border: none; padding: 0.8rem 1.5rem; border-radius: 50px; transition: all .2s ease-in-out; box-shadow: var(--shadow); }
.btn-primary:hover:not(:disabled), .btn-secondary:hover:not(:disabled), .btn-confirm:hover:not(:disabled) { transform: translateY(-2px); box-shadow: var(--shadow-hover); }

.btn-primary { background-color: var(--k-primary-1); color: white; }
.btn-primary:hover:not(:disabled) { background-color: #D96D1B; } /* Darker Carrot Orange */

.btn-secondary { background-color: var(--k-primary-2); color: white; }
.btn-secondary:hover:not(:disabled) { background-color: #27AE60; } /* Darker Emerald Green */

.btn-danger { background: var(--k-accent-red); color: white; width: auto; }
.btn-danger:hover:not(:disabled) { background-color: #C0392B; } /* Darker Tomato Red */

.btn-confirm { background-color: var(--k-primary-2); color: white; width: 100%; margin-top: 2rem; padding: 1rem; font-size: 1.2rem; }
.btn-confirm:hover:not(:disabled) { background-color: #27AE60; } /* Darker Emerald Green */

.btn-info { background-color: transparent; color: var(--k-primary-1); border: 2px solid var(--k-primary-1); padding: 0.4rem 0.8rem; margin-top: 1rem; }
.btn-info:hover { background-color: var(--k-primary-1); color: white; }

button:disabled { background-color: #BDBDBD !important; color: #757575 !important; cursor: not-allowed !important; box-shadow: none !important; transform: none !important; border: none; }
.btn-confirm:disabled { background-color: var(--k-text-secondary) !important; opacity: 0.7; color: white !important; }


/* ERWEITERTE FILTER-UI */
.form-group-inline { display: flex; gap: 1.5rem; }
.form-group-inline .form-group { flex: 1; }
.radio-group-container, .checkbox-group-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.75rem; }
.radio-group, .checkbox-group { display: flex; align-items: center; background-color: var(--k-bg-card); /* Changed to card background */ padding: 0.75rem 1rem; border-radius: 8px; border: 2px solid var(--k-border-light); transition: all 0.2s; cursor: pointer; }
.radio-group:has(input:checked), .checkbox-group:has(input:checked) { border-color: var(--k-primary-1); background-color: var(--k-primary-1-light); }
.radio-group input[type="radio"], .checkbox-group input[type="checkbox"] { width: 1.15em; height: 1.15em; margin-right: .75rem; accent-color: var(--k-primary-1); cursor: pointer; }
.radio-group label, .checkbox-group label { margin: 0; font-weight: 500; font-size: 0.95rem; cursor: pointer; color: var(--k-text-secondary); }
.radio-group:has(input:checked) label, .checkbox-group:has(input:checked) label { color: var(--k-text-primary); }
select#cuisine-style { width: 100%; padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid var(--k-border-light); border-radius: 8px; background-color: var(--k-bg-card); font-family: 'Poppins', sans-serif; color: var(--k-text-primary); cursor: pointer; }
select#cuisine-style:focus { outline: none; border-color: var(--k-primary-1); box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.2); } /* Focus color related to k-primary-1 */
fieldset { border: 2px solid var(--k-border-dark); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;} /* Slightly thicker border, more rounded */
fieldset legend { color: var(--k-primary-1); font-weight: 600; padding: 0 0.5rem; }
textarea { height: 100px; background-color: var(--k-bg-card); border: 1px solid var(--k-border-light); color: var(--k-text-primary); border-radius: 8px; padding: 0.75rem; }
textarea:focus { border-color: var(--k-primary-1); box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.2); outline: none;}

/* MODAL, EINKAUFSLISTE, FOOTER, etc. */
#shopping-list-container li { border-left: 5px solid var(--k-accent-yellow); padding: 0.75rem 1rem; margin-bottom: 0.5rem; background-color: var(--k-bg-card); border-radius: 0 8px 8px 0; box-shadow: var(--shadow); }
#shopping-list-container li.have-at-home { border-left-color: var(--k-primary-2); background-color: var(--k-primary-2-light); }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(61, 44, 42, 0.6); /* Dark brown overlay */ display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
.modal-overlay:not(.hidden) { opacity: 1; visibility: visible; }
.modal-content { background-color: var(--k-bg-card); padding: 2.5rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(61, 44, 42, 0.2); width: 90%; max-width: 750px; max-height: 90vh; overflow-y: auto; position: relative; transform: scale(0.95); transition: transform 0.3s ease; }
.modal-overlay:not(.hidden) .modal-content { transform: scale(1); }
.modal-close-btn { position: absolute; top: 1rem; right: 1.5rem; background: none; border: none; font-size: 2.5rem; line-height: 1; color: var(--k-text-secondary); cursor: pointer; transition: color 0.2s; }
.modal-close-btn:hover { color: var(--k-text-primary); }
#modal-body h2 { color: var(--k-primary-1); border-bottom: 2px solid var(--k-primary-1); padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
#modal-body h3 { color: var(--k-primary-2); margin-top: 2rem; margin-bottom: 1rem; } /* Changed to k-primary-2 */
#modal-body .ingredient-list, #modal-body .instructions-list { list-style: none; padding: 0; }
#modal-body .ingredient-list li { background-color: var(--k-bg-light); padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 0.5rem; display: flex; justify-content: space-between; border-left: 4px solid var(--k-accent-terracotta); }
#modal-body .instructions-list li { padding: 0.5rem 0; border-bottom: 1px solid var(--k-border-light); line-height: 1.7; } /* Changed to k-border-light */
footer { text-align: center; padding: 2rem; color: var(--k-text-secondary); margin-top: 2rem; } /* Changed to k-text-secondary */
/* LOADING SCREEN */
#loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #ffffff; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.5s ease-out; }
#loading-screen .logo-container { width: 120px; height: 120px; background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSIjMkE5RDhGIiBkPSJNNTAsMCBDNjAsMjAgODUsMjUgOTUsNTAgQzcwLDYwIDcwLDg1IDUwLDEwMCBDMzAsODUgMzAsNjAgNSw1MCBDMTUsMjUgNDAsMjAgNTAsMCBaIi8+PHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI4IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHBvaW50cz0iMzAsNTUgNDUsNzAgNzAsNDAiLz48L3N2Zz4='); background-size: contain; background-repeat: no-repeat; animation: pulse 1.5s infinite ease-in-out; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

/* RESPONSIVE DESIGN */
@media (max-width: 992px) {
    .main-layout { flex-direction: column; }
    aside.main-nav { position: static; width: 100%; margin-bottom: 2rem; }
    .main-nav nav { flex-direction: row; justify-content: space-around; flex-wrap: wrap; gap: 0.5rem; /* Added gap for wrapped items */ }
    .nav-item { flex-grow: 1; text-align: center; /* display: flex; flex-direction: column; align-items: center; justify-content: center; */ /* Alternative: stack icon and text */ }
    /* .nav-item span { display: none; } */ /* Keep text visible for clarity */
    .nav-item i { margin-bottom: 0.25rem; /* Add some space if icon is above text */ }
    .form-group-inline { flex-direction: column; }
}

@media (max-width: 768px) {
    .container { padding: 1rem; }
    .nav-item { padding: 0.8rem 0.5rem; font-size: 0.9rem; } /* Adjust padding & font for smaller nav items */
    .nav-item i { margin-right: 0.5rem; } /* Restore some margin for icon next to text */
    h1#logo { font-size: 1.5rem; }
    h2 { font-size: 1.75rem; }
    .card { padding: 1.5rem; }
    .recipe-options { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
    .banner-content { padding: 1.5rem; }
    .empty-state-banner {
        background: linear-gradient(135deg, rgba(244, 162, 97, 0.1), rgba(233, 196, 106, 0.1)), url('https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=1080&auto=format&fit=crop') center center/cover; /* Smaller image for tablets */
    }
    /* .nav-item i { margin-right: 0; } */ /* Text is back, so original margin rule for i might be fine or adjusted above */
    .plan-header { flex-direction: column; align-items: stretch; }
    .plan-header h2 { margin-bottom: 1rem; }
    #delete-plan-btn { width: 100%; }
    .modal-content { width: 95%; padding: 1.5rem; }
    .modal-close-btn { font-size: 2rem; top: 0.5rem; right: 1rem;}
}

@media (max-width: 576px) {
    body { font-size: 15px; } /* Adjust base font size for small devices */
    h1#logo { text-align: center; }
    .main-nav nav { flex-direction: column; }
    .nav-item { margin-bottom: 0.5rem; } /* Add some space between stacked nav items */
    .recipe-card { padding: 1rem; }
    .recipe-card-image { height: 150px; } /* Smaller image height on mobile */
    .recipe-card h4 { font-size: 1.1rem; }
    .btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info { padding: 0.7rem 1.2rem; font-size: 0.9rem; }
    .btn-confirm { font-size: 1rem; }
    .empty-state-banner { padding: 2rem 1rem; }
    .banner-content h2 { font-size: 1.5rem; }
    .banner-content p { font-size: 0.9rem; }
    .radio-group-container, .checkbox-group-container { grid-template-columns: 1fr; } /* Stack radio/checkbox groups */
    .form-group-inline { gap: 1rem; }
    #weekly-plan-container { /* Add styles for better mobile layout if needed */ }
    .day-container h3 { font-size: 1.3rem; }
}