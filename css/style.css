/* IMPORTS & GLOBALE VARIABLEN */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
:root {
    /* Original Palette (some might be overridden or kept for specific uses) */
    /* Original Palette (some might be overridden or kept for specific uses) */
    /* --primary-color: #2A9D8F; */ /* Original Teal - Deprecated */
    /* --primary-dark: #264653; */ /* Original Dark Blue/Teal - Deprecated for header, will be redefined if needed elsewhere */
    /* --accent-color: #E9C46A; */ /* Original Yellow - Deprecated */
    /* --accent-highlight: #F4A261; */ /* Original Orange - Deprecated */
    /* --danger-color: #E76F51; */ /* Original Coral Red - Deprecated, replaced by --k-accent-red */
    /* --background-color: #F7F9FA; */ /* Original Light Gray BG - Deprecated, replaced by --k-bg-light */
    /* --card-bg-color: #FFFFFF; */ /* Original White Card BG - Deprecated, replaced by --k-bg-card */
    /* --text-color: #264653; */ /* Original Dark Text - Deprecated, replaced by --k-text-primary */
    /* --subtle-text-color: #8D99AE; */ /* Original Gray Text - Deprecated, replaced by --k-text-secondary */
    /* --border-color: #E9ECEF; */ /* Original Light Border - Deprecated, replaced by --k-border-light */

    /* New Kitchen-Friendly Harmonious & Colorful Palette - REFINED */
    --k-bg-light: #FDFCFB; /* Slightly brighter Warm Cream BG */
    --k-bg-card: #FFFFFF; /* Card BG - keeping white */
    --k-bg-overlay: rgba(61, 44, 42, 0.65); /* Overlay for modal, using dark brown base */

    --k-text-primary: #3A2A27; /* Slightly adjusted Dark Brown for primary text */
    --k-text-secondary: #70605C; /* Slightly adjusted Softer Brown for secondary text */
    --k-text-on-primary: #FFFFFF; /* Text color for on --k-primary-1 backgrounds */
    --k-text-on-secondary: #FFFFFF; /* Text color for on --k-primary-2 backgrounds */

    --k-primary-1: #E67E22; /* Carrot Orange - Maintained */
    --k-primary-1-darker: #D35400; /* Darker Carrot Orange for hover/active */
    --k-primary-1-lighter: #FADEC9; /* Lighter Carrot Orange for subtle backgrounds/hovers */

    --k-primary-2: #2ECC71; /* Emerald Green - Maintained */
    --k-primary-2-darker: #27AE60; /* Darker Emerald Green for hover/active */
    --k-primary-2-lighter: #D5F5E3; /* Lighter Emerald Green for subtle backgrounds/hovers */

    --k-accent-red: #E74C3C; /* Tomato Red */
    --k-accent-red-darker: #C0392B; /* Darker Tomato Red */
    --k-accent-yellow: #F1C40F; /* Sunny Yellow */
    --k-accent-blue: #3498DB; /* Cornflower Blue */
    --k-accent-purple: #9B59B6; /* Plum Purple */
    --k-accent-teal: #1ABC9C; /* Teal */
    --k-accent-terracotta: #E2725B; /* Terracotta */

    --k-border-light: #EDEAE8; /* Softer, warm border */
    --k-border-medium: #D1C9C6; /* Medium warm border for inputs etc. */
    --k-border-dark: #B0A5A1;  /* Darker, warm border for fieldsets etc. */

    /* Shadows - Refined for a softer, modern look */
    --shadow-soft: 0 2px 8px rgba(61, 44, 42, 0.07);
    --shadow-medium: 0 4px 12px rgba(61, 44, 42, 0.1);
    --shadow-strong: 0 8px 20px rgba(61, 44, 42, 0.12);

    /* Helper lighter shades - standardized naming */
    /* --k-primary-1-light: #FADFC5; */ /* Replaced by --k-primary-1-lighter */
    /* --k-primary-2-light: #C8F7DC; */ /* Replaced by --k-primary-2-lighter */

    --header-bg: #3A2A27; /* Dark Brown, same as --k-text-primary for a unified dark theme element */
    --header-text: #FFFFFF;
}

/* BASE STYLES */
body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    background-color: var(--k-bg-light);
    color: var(--k-text-primary);
    line-height: 1.6;
    font-size: 16px; /* Explicit base font size */
    -webkit-font-smoothing: antialiased; /* Smoother fonts on WebKit */
    -moz-osx-font-smoothing: grayscale; /* Smoother fonts on Firefox */
}
.container { max-width: 1200px; margin: 0 auto; padding: 1.5rem 2rem; } /* Increased base padding slightly */

h1, h2, h3, h4, h5, h6 {
    color: var(--k-text-primary);
    font-weight: 600; /* Default bold for headings */
    margin-top: 0; /* Remove default top margin */
    margin-bottom: 1rem; /* Consistent bottom margin */
}
h1 { font-size: 2.5rem; line-height: 1.2; }
h2 { font-size: 2rem; line-height: 1.25; }
h3 { font-size: 1.5rem; line-height: 1.3; }
h4 { font-size: 1.25rem; line-height: 1.35; }
p { margin-top: 0; margin-bottom: 1rem; }
a { color: var(--k-primary-1); text-decoration: none; transition: color 0.2s ease-in-out; }
a:hover { color: var(--k-primary-1-darker); }

i.fa-solid { margin-right: 0.7rem; width: 22px; text-align: center; } /* Slightly adjusted margin and width */

/* HEADER & NAVIGATION */
header { background: var(--header-bg); color: var(--header-text); padding: 1rem 0; box-shadow: var(--shadow-medium); }
#logo { font-weight: 700; font-size: 1.75rem; color: var(--header-text); }
#logo i { color: var(--header-text); } /* Ensure icon is also white, already was but good to be explicit */
.main-layout { display: flex; gap: 2.5rem; align-items: flex-start; margin-top: 2.5rem; } /* Increased gap and margin */
aside.main-nav {
    flex: 0 0 230px; /* Slightly wider */
    position: sticky;
    top: 2.5rem; /* Align with new margin-top of main-layout */
    padding-right: 1.5rem; /* Space between nav and content if content flows near */
}
main.main-content { flex: 1; min-width: 0; /* Prevents flex items from overflowing */ }

.main-nav nav {
    display: flex;
    flex-direction: column;
    gap: 0.75rem; /* Increased gap between nav items */
}
.nav-item {
    display: flex;
    align-items: center;
    padding: 0.85rem 1.25rem; /* Adjusted padding */
    text-decoration: none;
    color: var(--k-text-secondary);
    font-weight: 500;
    border-radius: 10px; /* Softer radius */
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    border: 1px solid transparent; /* Placeholder for subtle border on hover/active */
}
.nav-item i {
    color: var(--k-text-secondary); /* Default icon color */
    transition: color 0.2s ease-in-out;
    margin-right: 0.8rem; /* Ensure consistent icon spacing */
}
.nav-item:hover {
    background-color: var(--k-primary-1-lighter);
    color: var(--k-text-primary);
    border-color: var(--k-primary-1-lighter);
}
.nav-item:hover i {
    color: var(--k-primary-1); /* Icon takes primary color on hover */
}
.nav-item.active {
    background-color: var(--k-primary-1);
    color: var(--k-text-on-primary);
    font-weight: 600;
    box-shadow: var(--shadow-soft);
    border-color: var(--k-primary-1);
}
.nav-item.active i {
    color: var(--k-text-on-primary);
}


/* BANNER & SEKTIONEN */
.empty-state-banner {
    background: linear-gradient(135deg, rgba(230, 126, 34, 0.05), rgba(241, 196, 15, 0.05)), /* Softer gradient */
                  url('https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=2070&auto=format&fit=crop') center center/cover;
    padding: 4rem 2rem;
    border-radius: 20px; /* Consistent with other larger radii */
    text-align: center;
    box-shadow: var(--shadow-medium); /* Add a subtle shadow */
}
.banner-content {
    background-color: rgba(253, 252, 251, 0.9); /* Slightly more opaque --k-bg-light */
    display: inline-block;
    padding: 2.5rem 3rem; /* More horizontal padding */
    border-radius: 12px; /* Consistent with cards */
    backdrop-filter: blur(6px); /* Slightly stronger blur */
    box-shadow: 0 0 20px rgba(0,0,0,0.05); /* Inner shadow effect to lift it a bit */
}
/* h2 { font-size: 2rem; font-weight: 700; margin-top: 0; margin-bottom: 1.5rem; } */ /* Base h2 style is already set */

/* Image specific CSS */
.recipe-card-image {
    width: 100%;
    height: 180px; /* Or your desired height */
    object-fit: cover; /* Ensures the image covers the area, might crop */
    border-radius: 8px 8px 0 0; /* Optional: if you want rounded corners at the top */
    margin-bottom: 1rem; /* Space between image and card content */
}
.plan-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; /* Increased margin */ }
.plan-instructions {
    text-align: center;
    color: var(--k-text-primary); /* Use primary text color */
    background-color: var(--k-primary-1-lighter); /* Use lighter primary accent */
    padding: 1rem; /* Increased padding */
    border-radius: 10px; /* Softer radius */
    margin-bottom: 2.5rem; /* Increased margin */
    border: 1px solid var(--k-primary-1); /* Subtle border with primary color */
}
.card {
    background-color: var(--k-bg-card);
    padding: 2rem; /* Adjusted padding */
    border-radius: 12px; /* Softer radius */
    box-shadow: var(--shadow-medium); /* Use refined medium shadow */
    margin-bottom: 2.5rem;
    border: 1px solid var(--k-border-light); /* Use refined light border */
}
#dashboard-view .card { box-shadow: none; border: none; padding: 0; } /* Keep this specific override */
.view.hidden { display: none; }

/* REZEPTKARTEN */
.day-container { margin-bottom: 3rem; /* Increased margin */ }
.day-container h3 {
    font-size: 1.6rem; /* Slightly larger */
    font-weight: 600;
    padding-bottom: 0.75rem; /* Increased padding */
    border-bottom: 2px solid var(--k-border-medium); /* Use medium border */
    margin-bottom: 1.5rem; /* Space below heading */
}
.recipe-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem; /* Increased gap */
}
.recipe-card {
    background: var(--k-bg-card);
    border: 2px solid transparent; /* Thinner border, transparent by default */
    padding: 1.5rem; /* Maintain padding */
    border-radius: 12px; /* Consistent radius */
    box-shadow: var(--shadow-soft); /* Use soft shadow */
    transition: all 0.25s ease-in-out;
    cursor: pointer;
    display: flex;
    flex-direction: column;
}
.recipe-card > *:last-child { margin-top: auto; } /* Pushes button to bottom */

.recipe-card.selected {
    border-color: var(--k-primary-1);
    transform: translateY(-4px) scale(1.015); /* Subtle lift and scale */
    box-shadow: var(--shadow-medium); /* Slightly stronger shadow when selected */
}
.recipe-card:not(.selected) {
    opacity: 0.9; /* Slightly less opacity for non-selected, more subtle than before */
}
.recipe-card:hover:not(.selected) { /* Hover effect only for non-selected cards */
    opacity: 1;
    transform: translateY(-4px);
    box-shadow: var(--shadow-medium);
}
.recipe-card h4 { /* Already styled by base h4, can add specifics if needed */
    margin-bottom: 0.5rem; /* Space below title */
}

/* Colorful tags - Refined */
.recipe-card .tags { margin-bottom: 0.75rem; /* Space below tags */ }
.recipe-card .tags span {
    display: inline-block;
    padding: .4em .9em; /* Slightly more padding */
    font-size: .75rem; /* Slightly smaller for compactness */
    font-weight: 600;
    border-radius: 15px; /* Softer pill shape */
    margin: 0.25rem 0.15rem; /* Adjusted margin */
    color: var(--k-text-on-primary); /* Default to white/light text */
    line-height: 1.3;
}
.tags span i { margin-right: 0.4rem; font-size: 0.7rem; }

.recipe-card .tags span.price-tag {
    background-color: var(--k-primary-2);
    color: var(--k-text-on-secondary);
}
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+1) { background-color: var(--k-accent-terracotta); }
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+2) { background-color: var(--k-accent-teal); }
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+3) { background-color: var(--k-accent-purple); }
.recipe-card .tags span:not(.price-tag):nth-of-type(4n+4) { background-color: var(--k-accent-yellow); color: var(--k-text-primary); }
.recipe-card .tags span:not(.price-tag):only-of-type { background-color: var(--k-accent-blue); }


.recipe-card .match-info {
    margin-top: 1rem; /* Adjusted spacing */
    padding-top: 1rem;
    border-top: 1px solid var(--k-border-light);
}
.match-info .match-bar {
    width: 100%;
    height: 10px; /* Slightly thinner */
    background-color: var(--k-border-light);
    border-radius: 5px; /* Rounded ends */
    overflow: hidden;
    margin-bottom: 0.5rem;
}
.match-info .match-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--k-accent-yellow), var(--k-primary-1));
    border-radius: 5px;
    transition: width 0.5s ease-in-out;
}
.match-info .match-text { font-size: 0.85rem; font-weight: 500; color: var(--k-text-secondary); }
.match-info .missing-ingredients { font-size: 0.85rem; color: var(--k-accent-red); margin-top: 0.4rem; }
.match-info .all-ingredients-present { font-size: 0.85rem; color: var(--k-primary-2); font-weight: 600; margin-top: 0.4rem; }
.missing-ingredients strong { font-weight: 600; } /* Remains good */

/* BUTTONS - Refined */
.btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.95rem; /* Slightly adjusted font size */
    text-align: center;
    cursor: pointer;
    border: 1px solid transparent; /* Base border */
    padding: 0.75rem 1.5rem; /* Adjusted padding */
    border-radius: 8px; /* Softer radius than pill */
    transition: all .2s ease-in-out;
    box-shadow: var(--shadow-soft); /* Use soft shadow */
    text-transform: none; /* Ensuring no accidental uppercase */
}
.btn-primary:hover:not(:disabled),
.btn-secondary:hover:not(:disabled),
.btn-confirm:hover:not(:disabled),
.btn-danger:hover:not(:disabled), /* Added danger to this group */
.btn-info:hover:not(:disabled) { /* Added info to this group */
    transform: translateY(-2px);
    box-shadow: var(--shadow-medium); /* Use medium shadow on hover */
}

.btn-primary {
    background-color: var(--k-primary-1);
    color: var(--k-text-on-primary);
    border-color: var(--k-primary-1);
}
.btn-primary:hover:not(:disabled) {
    background-color: var(--k-primary-1-darker);
    border-color: var(--k-primary-1-darker);
}

.btn-secondary {
    background-color: var(--k-primary-2);
    color: var(--k-text-on-secondary);
    border-color: var(--k-primary-2);
}
.btn-secondary:hover:not(:disabled) {
    background-color: var(--k-primary-2-darker);
    border-color: var(--k-primary-2-darker);
}

.btn-danger {
    background: var(--k-accent-red);
    color: var(--k-text-on-primary); /* Assuming white text on red */
    border-color: var(--k-accent-red);
    width: auto; /* Keep if specific width is needed for some cases */
}
.btn-danger:hover:not(:disabled) {
    background-color: var(--k-accent-red-darker);
    border-color: var(--k-accent-red-darker);
}

.btn-confirm { /* Mostly inherits from .btn-primary or .btn-secondary now */
    background-color: var(--k-primary-2); /* Defaulting to green for confirm */
    color: var(--k-text-on-secondary);
    border-color: var(--k-primary-2);
    width: 100%;
    margin-top: 2rem;
    padding: 0.9rem 1.5rem; /* Slightly larger padding for confirm */
    font-size: 1.1rem; /* Larger font for confirm */
}
.btn-confirm:hover:not(:disabled) {
    background-color: var(--k-primary-2-darker);
    border-color: var(--k-primary-2-darker);
}

.btn-info { /* For "Rezept ansehen" type buttons */
    background-color: transparent;
    color: var(--k-primary-1);
    border: 1px solid var(--k-primary-1); /* Thinner border */
    padding: 0.5rem 1rem; /* Adjusted padding */
    margin-top: 1rem;
    font-size: 0.85rem; /* Smaller font for info buttons */
}
.btn-info:hover:not(:disabled) {
    background-color: var(--k-primary-1-lighter);
    color: var(--k-primary-1-darker);
    border-color: var(--k-primary-1);
}

button:disabled,
.btn-primary:disabled,
.btn-secondary:disabled,
.btn-danger:disabled,
.btn-confirm:disabled,
.btn-info:disabled {
    background-color: #D1C9C6 !important; /* Using a color from our palette (medium border) */
    color: #8A7975 !important; /* Derived from text secondary, darkened */
    border-color: #D1C9C6 !important;
    cursor: not-allowed !important;
    box-shadow: none !important;
    transform: none !important;
    opacity: 0.7;
}
/* .btn-confirm:disabled specific style was similar to general disabled, so removed redundancy */


/* ERWEITERTE FILTER-UI & FORM ELEMENTS */
input[type="text"],
input[type="number"],
input[type="date"],
input[type="email"], /* Added for future use */
input[type="password"], /* Added for future use */
textarea,
select {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
    font-family: 'Poppins', sans-serif;
    color: var(--k-text-primary);
    background-color: var(--k-bg-card);
    border: 1px solid var(--k-border-medium);
    border-radius: 8px; /* Consistent radius */
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05); /* Subtle inner shadow */
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    box-sizing: border-box; /* Important for width calculation */
}
input[type="text"]:focus,
input[type="number"]:focus,
input[type="date"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: var(--k-primary-1);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05), 0 0 0 3px rgba(230, 126, 34, 0.15); /* Primary color focus ring */
}
textarea {
    height: auto; /* Allow textarea to grow if needed, or set specific rows */
    min-height: 100px;
    resize: vertical; /* Allow vertical resize */
}
label { /* General label styling */
    display: block;
    font-weight: 500;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    color: var(--k-text-primary);
}

.form-group { margin-bottom: 1.5rem; } /* Add default bottom margin to form groups */
.form-group-inline { display: flex; gap: 1.5rem; align-items: flex-end; /* Align items to bottom for mixed height inputs */ }
.form-group-inline .form-group { flex: 1; margin-bottom: 0; /* Remove default margin if inside inline group */ }

.radio-group-container, .checkbox-group-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 0.85rem; /* Slightly increased gap */
}
.radio-group, .checkbox-group {
    display: flex;
    align-items: center;
    background-color: transparent; /* Remove card background from here */
    padding: 0.75rem 1rem;
    border-radius: 8px;
    border: 1px solid var(--k-border-medium); /* Use medium border */
    transition: all 0.2s;
    cursor: pointer;
}
.radio-group:hover, .checkbox-group:hover {
    border-color: var(--k-border-dark); /* Darken border on hover */
}
.radio-group:has(input:checked), .checkbox-group:has(input:checked) {
    border-color: var(--k-primary-1);
    background-color: var(--k-primary-1-lighter); /* Use lighter primary */
    box-shadow: var(--shadow-soft);
}
.radio-group input[type="radio"], .checkbox-group input[type="checkbox"] {
    width: 1.2em; /* Slightly larger */
    height: 1.2em;
    margin-right: 0.85rem; /* Increased margin */
    accent-color: var(--k-primary-1);
    cursor: pointer;
    appearance: none; /* For custom styling */
    -webkit-appearance: none;
    border: 2px solid var(--k-border-dark);
    border-radius: 50%; /* For radio */
    position: relative;
    transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
}
.checkbox-group input[type="checkbox"] {
    border-radius: 4px; /* For checkbox */
}
.radio-group input[type="radio"]:checked, .checkbox-group input[type="checkbox"]:checked {
    background-color: var(--k-primary-1);
    border-color: var(--k-primary-1);
}
/* Custom checkmark/dot */
.radio-group input[type="radio"]:checked::before {
    content: '';
    display: block;
    width: 0.5em;
    height: 0.5em;
    background-color: white;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.checkbox-group input[type="checkbox"]:checked::before {
    content: '\f00c'; /* Font Awesome check icon */
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: white;
    font-size: 0.8em;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    line-height: 1; /* Ensure proper vertical alignment */
}

.radio-group label, .checkbox-group label { /* Label specific to radio/checkbox groups */
    margin: 0;
    font-weight: 500;
    font-size: 0.9rem; /* Match general label */
    cursor: pointer;
    color: var(--k-text-secondary);
}
.radio-group:has(input:checked) label, .checkbox-group:has(input:checked) label {
    color: var(--k-text-primary);
}

select#cuisine-style {
    /* Inherits from general select styles now */
    /* width: 100%; padding: 0.75rem 1rem; font-size: 1rem; border: 1px solid var(--k-border-light); border-radius: 8px; background-color: var(--k-bg-card); font-family: 'Poppins', sans-serif; color: var(--k-text-primary); cursor: pointer; */
    appearance: none; /* For custom arrow */
    -webkit-appearance: none;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%2370605C%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.4-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 0.8em;
    padding-right: 2.5rem; /* Make space for arrow */
}
/* select#cuisine-style:focus - Handled by general select:focus */

fieldset {
    border: 1px solid var(--k-border-dark); /* Thinner border */
    padding: 1.5rem 2rem; /* Adjusted padding */
    border-radius: 10px; /* Softer radius */
    margin-bottom: 2rem; /* Increased margin */
}
fieldset legend {
    color: var(--k-primary-1);
    font-weight: 600;
    padding: 0 0.75rem; /* Adjusted padding */
    font-size: 1rem; /* Consistent with labels */
}
/* textarea styles are now part of the general input/textarea block */
/* textarea:focus - Handled by general textarea:focus */

/* MODAL, EINKAUFSLISTE, FOOTER, etc. */
#shopping-list-container li {
    border-left: 4px solid var(--k-accent-yellow); /* Slightly thinner accent border */
    padding: 0.85rem 1.25rem; /* Adjusted padding */
    margin-bottom: 0.6rem; /* Adjusted margin */
    background-color: var(--k-bg-card);
    border-radius: 0 8px 8px 0; /* Keep this unique radius for list items */
    box-shadow: var(--shadow-soft); /* Use soft shadow */
    transition: box-shadow 0.2s ease-in-out;
}
#shopping-list-container li:hover {
    box-shadow: var(--shadow-medium);
}
#shopping-list-container li.have-at-home {
    border-left-color: var(--k-primary-2);
    background-color: var(--k-primary-2-lighter); /* Use standardized lighter green */
}
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--k-bg-overlay); /* Use new overlay variable */
    display: flex; justify-content: center; align-items: center;
    z-index: 2000;
    opacity: 0; visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
.modal-overlay:not(.hidden) { opacity: 1; visibility: visible; }

.modal-content {
    background-color: var(--k-bg-card);
    padding: 2rem; /* Adjusted padding */
    border-radius: 12px; /* Softer radius */
    box-shadow: var(--shadow-strong); /* Use strong shadow for modal pop */
    width: 90%; max-width: 700px; /* Slightly narrower max-width */
    max-height: 85vh; /* Adjusted max height */
    overflow-y: auto;
    position: relative;
    transform: scale(0.95) translateY(10px); /* Add slight Y offset for entry animation */
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother cubic-bezier */
}
.modal-overlay:not(.hidden) .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1; /* Ensure opacity transition for content too */
}
.modal-close-btn {
    position: absolute;
    top: 0.75rem; right: 1rem; /* Adjusted position */
    background: none; border: none;
    font-size: 2rem; /* Slightly smaller */
    line-height: 1;
    color: var(--k-text-secondary);
    cursor: pointer;
    padding: 0.5rem; /* Add padding to increase click area */
    transition: color 0.2s, transform 0.2s;
}
.modal-close-btn:hover { color: var(--k-text-primary); transform: rotate(90deg); }

#modal-body h2 {
    color: var(--k-primary-1);
    border-bottom: 2px solid var(--k-primary-1-lighter); /* Lighter border */
    padding-bottom: 0.75rem;
    margin-bottom: 1.5rem;
    font-size: 1.8rem; /* Adjusted size */
}
#modal-body h3 {
    color: var(--k-primary-2);
    margin-top: 1.5rem; /* Adjusted margin */
    margin-bottom: 0.75rem;
    font-size: 1.3rem; /* Adjusted size */
}
#modal-body .ingredient-list, #modal-body .instructions-list { list-style: none; padding: 0; }

#modal-body .ingredient-list li {
    background-color: var(--k-bg-light);
    padding: 0.75rem 1rem;
    border-radius: 8px;
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
    border-left: 3px solid var(--k-accent-terracotta); /* Thinner accent */
    font-size: 0.9rem;
}
#modal-body .instructions-list li {
    padding: 0.6rem 0; /* Adjusted padding */
    border-bottom: 1px solid var(--k-border-light);
    line-height: 1.65; /* Slightly increased for readability */
    font-size: 0.9rem;
}
#modal-body .instructions-list li:last-child { border-bottom: none; }

footer { text-align: center; padding: 2.5rem 1rem; color: var(--k-text-secondary); margin-top: 3rem; border-top: 1px solid var(--k-border-light); }
/* LOADING SCREEN */
#loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #ffffff; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.5s ease-out; }
#loading-screen .logo-container { width: 120px; height: 120px; background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSIjMkE5RDhGIiBkPSJNNTAsMCBDNjAsMjAgODUsMjUgOTUsNTAgQzcwLDYwIDcwLDg1IDUwLDEwMCBDMzAsODUgMzAsNjAgNSw1MCBDMTUsMjUgNDAsMjAgNTAsMCBaIi8+PHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLXdpZHRoPSI4IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHBvaW50cz0iMzAsNTUgNDUsNzAgNzAsNDAiLz48L3N2Zz4='); background-size: contain; background-repeat: no-repeat; animation: pulse 1.5s infinite ease-in-out; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

/* RESPONSIVE DESIGN - Reviewed and Refined */
@media (max-width: 1024px) { /* Adding a new breakpoint for larger tablets / smaller desktops */
    .main-layout { gap: 1.5rem; } /* Reduce gap slightly */
    aside.main-nav { flex: 0 0 200px; padding-right: 1rem; } /* Make nav a bit narrower */
    .container { padding: 1.5rem; } /* Adjust container padding */
    h1 { font-size: 2.25rem; }
    h2 { font-size: 1.75rem; }
    h3 { font-size: 1.4rem; }
    .recipe-options { gap: 1.5rem; } /* Reduce gap between recipe cards */
}

@media (max-width: 992px) { /* Tablet and below */
    .main-layout {
        flex-direction: column;
        margin-top: 1.5rem; /* Reduce top margin when stacked */
        gap: 1.5rem; /* Reduce gap when stacked */
    }
    aside.main-nav {
        position: static;
        width: 100%;
        margin-bottom: 1.5rem; /* Space below nav when stacked */
        padding-right: 0; /* No padding needed when full width */
        top: auto; /* Reset sticky positioning */
    }
    .main-nav nav {
        flex-direction: row;
        justify-content: space-around; /* Distribute items evenly */
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    .nav-item {
        flex-grow: 1; /* Allow items to grow and fill space */
        justify-content: center; /* Center text and icon */
        padding: 0.8rem 1rem; /* Adjust padding for horizontal layout */
    }
    .nav-item i { margin-right: 0.5rem; /* Ensure icon has some space if text wraps or is short */ }
    /* .nav-item span { display: none; } */ /* Decided against hiding text for clarity */
    /* .nav-item i { margin-bottom: 0.25rem; } */ /* Not stacking icon and text for now */

    .form-group-inline {
        flex-direction: column;
        gap: 1rem; /* Adjust gap for stacked form groups */
    }
    .form-group-inline .form-group {
        margin-bottom: 1rem; /* Add margin back when stacked */
    }
    .form-group-inline .form-group:last-child {
        margin-bottom: 0; /* Remove margin for the last item */
    }
    .card { padding: 1.5rem; } /* Reduce card padding */
}

@media (max-width: 768px) { /* Smaller tablets / large phones */
    .container { padding: 1rem 1rem; } /* Further reduce container padding */

    h1#logo { font-size: 1.6rem; } /* Reduce logo size */
    h1 { font-size: 2rem; }
    h2 { font-size: 1.6rem; }
    h3 { font-size: 1.3rem; }
    h4 { font-size: 1.1rem; }


    .nav-item { font-size: 0.9rem; } /* Slightly smaller font for nav items */
    .nav-item i { margin-right: 0.4rem; }

    .recipe-options { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; } /* Adjust recipe card layout */
    .empty-state-banner {
        padding: 3rem 1.5rem; /* Adjust padding */
        border-radius: 16px;
        background-image: linear-gradient(135deg, rgba(230, 126, 34, 0.05), rgba(241, 196, 15, 0.05)),
                          url('https://images.unsplash.com/photo-1547592180-85f173990554?q=80&w=1200&auto=format&fit=crop'); /* Slightly smaller image */
    }
    .banner-content { padding: 2rem; border-radius: 10px; }
    .banner-content h2 { font-size: 1.6rem; margin-bottom: 0.75rem; }

    .plan-header {
        flex-direction: column;
        align-items: stretch; /* Make items full width */
        gap: 0.75rem; /* Add gap between stacked items */
    }
    .plan-header h2 { margin-bottom: 0.5rem; /* Reduce margin when stacked */ }
    #delete-plan-btn { width: 100%; } /* Make delete button full width */

    .modal-content {
        width: calc(100% - 2rem); /* Full width with some margin */
        margin: 1rem;
        padding: 1.5rem;
        max-height: 90vh;
    }
    .modal-close-btn { font-size: 1.8rem; top: 0.8rem; right: 0.8rem; }
    #modal-body h2 { font-size: 1.6rem; }
    #modal-body h3 { font-size: 1.2rem; }

    .btn-primary, .btn-secondary, .btn-danger, .btn-confirm, .btn-info {
        padding: 0.7rem 1.2rem;
        font-size: 0.9rem;
    }
    .btn-confirm { font-size: 1rem; padding: 0.8rem 1.2rem; }
}

@media (max-width: 576px) { /* Mobile phones */
    body { font-size: 15px; /* Base font size adjustment */ }
    .container { padding: 1rem 0.75rem; }

    h1#logo { text-align: center; width: 100%; font-size: 1.5rem; } /* Center logo on mobile */
    header .container { padding: 1rem 0.75rem; } /* Adjust header padding */
    h1 { font-size: 1.75rem; }
    h2 { font-size: 1.4rem; }
    h3 { font-size: 1.2rem; }

    .main-nav nav {
        flex-direction: column; /* Stack nav items vertically */
        gap: 0.75rem;
    }
    .nav-item {
        margin-bottom: 0; /* Remove margin from 992px if it was added */
        width: 100%; /* Make nav items full width */
        justify-content: flex-start; /* Align text to start */
    }

    .recipe-card { padding: 1rem; }
    .recipe-card-image { height: 160px; } /* Adjust image height */
    .recipe-card h4 { font-size: 1.05rem; }
    .recipe-card .tags span { font-size: 0.7rem; padding: .35em .8em; }

    .empty-state-banner { padding: 2.5rem 1rem; }
    .banner-content { padding: 1.5rem; }
    .banner-content h2 { font-size: 1.4rem; }
    .banner-content p { font-size: 0.9rem; }

    .radio-group-container, .checkbox-group-container {
        grid-template-columns: 1fr; /* Stack radio/checkbox options */
        gap: 0.75rem;
    }
    .radio-group, .checkbox-group { padding: 0.6rem 0.8rem; }
    .radio-group input[type="radio"], .checkbox-group input[type="checkbox"] { margin-right: 0.6rem; }

    .day-container h3 { font-size: 1.25rem; }
    #weekly-plan-container { /* No specific styles needed yet, but placeholder remains */ }
    #pantry-item-details { flex-direction: column; gap: 1rem; }
    #pantry-item-details .form-group { width: 100%; }
}

/* Styles for new inventory (Mein Vorrat) section - Ensure responsive behavior */
#add-pantry-item-form {
    margin-bottom: 2rem;
    position: relative; /* For suggestions positioning */
}

#pantry-item-search {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid var(--k-border-light);
    border-radius: 8px;
    background-color: var(--k-bg-card);
    font-family: 'Poppins', sans-serif;
    color: var(--k-text-primary);
    box-sizing: border-box; /* Ensures padding doesn't add to width */
}
#pantry-item-search:focus {
    outline: none;
    border-color: var(--k-primary-1);
    box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.2);
}

.suggestions-list {
    position: absolute;
    width: 100%;
    background-color: var(--k-bg-card);
    border: 1px solid var(--k-border-light);
    border-top: none;
    border-radius: 0 0 8px 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    z-index: 100;
    max-height: 200px;
    overflow-y: auto;
}
.suggestions-list.hidden {
    display: none;
}
.suggestions-list ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.suggestions-list li {
    padding: 0.75rem 1rem;
    cursor: pointer;
    font-size: 0.95rem;
    color: var(--k-text-secondary);
}
.suggestions-list li:hover {
    background-color: var(--k-primary-1-light);
    color: var(--k-text-primary);
}

#pantry-item-details {
    margin-top: 1rem;
    margin-bottom: 1rem;
    padding: 1rem;
    background-color: var(--k-bg-light); /* Slightly different background to group them */
    border-radius: 8px;
    border: 1px solid var(--k-border-light);
}
#pantry-item-details .form-group input {
     width: 100%; /* Make inputs take full width of their group */
     padding: 0.5rem 0.8rem; /* Smaller padding for these inputs */
     font-size: 0.9rem;
     box-sizing: border-box;
     border: 1px solid var(--k-border-light);
     border-radius: 6px;
}
#pantry-item-details .form-group input:focus {
    border-color: var(--k-primary-1);
    box-shadow: 0 0 0 2px rgba(230, 126, 34, 0.15);
    outline: none;
}
#pantry-item-details .form-group label {
    font-size: 0.85rem;
    margin-bottom: 0.3rem;
    display: block;
}


#add-item-to-pantry-btn {
    margin-top: 1rem;
    /* Use existing btn-primary styles, specific overrides if needed */
}

hr.section-divider {
    border: none;
    border-top: 1px solid var(--k-border-dark);
    margin: 2.5rem 0;
}

#current-pantry-section h3 {
    margin-bottom: 1rem;
}

#current-pantry-display ul.current-pantry-list {
    list-style: none;
    padding: 0;
}

#current-pantry-display li.pantry-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    background-color: var(--k-bg-light);
    border-radius: 8px;
    border-left: 4px solid var(--k-primary-2); /* Green accent */
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
#current-pantry-display li.pantry-list-item span {
    flex-grow: 1;
    font-size: 0.95rem;
}

#current-pantry-display .btn-remove-pantry-item {
    background: none;
    border: none;
    color: var(--k-accent-red);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0.25rem 0.5rem;
    margin-left: 1rem;
}
#current-pantry-display .btn-remove-pantry-item:hover {
    color: #C0392B; /* Darker red */
}

#empty-pantry-message {
    text-align: center;
    color: var(--k-text-secondary);
    padding: 1rem;
    background-color: var(--k-bg-light);
    border-radius: 8px;
}
#find-recipes-from-pantry-btn {
    margin-top: 1.5rem; /* Space above this button */
}